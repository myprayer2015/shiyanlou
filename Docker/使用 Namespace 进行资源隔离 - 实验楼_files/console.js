webpackJsonp([7],{0:function(e,t){e.exports=function(e,t,n,o){var r,a=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(r=e,a=e.default);var s="function"==typeof a?a.options:a;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),o){var c=Object.create(s.computed||null);Object.keys(o).forEach(function(e){var t=o[e];c[e]=function(){return t}}),s.computed=c}return{esModule:r,exports:a,options:s}}},1:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<t.length;r++){var i=t[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},108:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(4),s=$("#jinja-data").data(),c=function(){function e(){r(this,e),this.$leftTime=$("#tools .lefttime span"),this.$increaseTimeModal=$("#increase-time-modal"),this.$timeoutModal=$("#timeout-modal"),this.ttl=10,this.deadline=null,this.leftSecs=0,this.timer=null}return a(e,[{key:"setup",value:function(e,t){this.deadline=(new Date).getTime()+1e3*e,this.leftSecs=this.deadline-(new Date).getTime(),this.leftSecs=parseInt(this.leftSecs/1e3),this.interval(t),this.increaseTime()}},{key:"interval",value:function(e){var t=this;this.timer=setInterval(o(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.timeout(e);case 2:o=t.timeFormater(t.leftSecs),t.$leftTime.text(o),t.isNotEvaluationCourse(),t.leftSecs%10==0&&(t.leftSecs=t.deadline-(new Date).getTime(),t.leftSecs=parseInt(t.leftSecs/1e3)),t.leftSecs--;case 7:case"end":return n.stop()}},n,t)})),1e3)}},{key:"refresh",value:function(e,t){clearInterval(this.timer),this.setup(e,t)}},{key:"timeout",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.removeItem("timeOut"),!((new Date).getTime()>=this.deadline||this.leftSecs<=0)){e.next=15;break}return clearInterval(this.timer),"function"==typeof t&&t(),e.prev=4,e.next=7,$.get("/vm/"+s.vmId);case 7:n=e.sent,n.vm.ttl<=0?($.post(s.stopLab,{userlab:s.userlabId}),"true"!=localStorage.getItem("virtualMachine")&&(localStorage.timeOut=!0,this.$timeoutModal.modal("show"))):this.setup(n.vm.ttl),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),$.post(s.stopLab,{userlab:s.userlabId}),"true"!=localStorage.getItem("virtualMachine")&&(localStorage.timeOut=!0,this.$timeoutModal.modal("show"));case 15:case"end":return e.stop()}},e,this,[[4,11]])}));return e}()},{key:"isNotEvaluationCourse",value:function(){var e=this;if(!s.isEvaluationCourse){this.leftSecs!=60*this.ttl&&this.leftSecs!=30*this.ttl||(this.$increaseTimeModal.modal("hide").modal("show"),this.$increaseTimeModal.find(".modal-header .close, .modal-footer .cancel").on("click",function(){e.$increaseTimeModal.modal("hide")}))}}},{key:"increaseTime",value:function(){var e=this;this.$increaseTimeModal.off("show.bs.modal").on("show.bs.modal",function(){var t=$(".modal-title",e.$increaseTimeModal),n=$(".modal-body",e.$increaseTimeModal),o=$(".modal-footer",e.$increaseTimeModal);e.leftSecs>60*e.ttl?(t.html("实验延时"),n.html("实验剩余时间"+Math.floor(e.leftSecs/60)+"分钟，\n                    剩余时间小于10分钟才可以延时。"),o.html('<button type="button" class="btn btn-primary"\n                    data-dismiss="modal">确定</button>')):(t.html("实验即将结束"),s.isJupyterLab?n.html("注意：实验剩余时间\n                        "+Math.floor(e.leftSecs/60)+"\n                        分钟，时间结束后实验环境将会被删除（本实验暂不支持保存，尽请谅解）！\n                        如需延长时间请点击“延时1小时”。"):s.isMember?n.html("注意：实验剩余时间\n                            "+Math.floor(e.leftSecs/60)+"\n                            分钟，如果您使用的不是已保存的环境，\n                            时间结束后实验环境将会被删除！\n                            如需延长时间请点击“延时1小时”。"):n.html("注意：实验剩余时间\n                            "+Math.floor(e.leftSecs/60)+"\n                            分钟，时间结束后实验环境将会被删除（会员环境可保存）！\n                            如需延长时间请点击“延时1小时”。"),o.html('<button type="button" class="btn btn-default cancel"\n                    data-dismiss="modal">取消</button>\n                    <button type="button" class="btn btn-primary confirm">延时1小时</button>\n                    '));var r=!1;o.find(".confirm").off("click").on("click",function(){if(r)return!1;r=!0,localStorage.addTimeManual=!0,$.post(s.increaseTime,{lab_id:s.labid}).done(function(t){e.$increaseTimeModal.modal("hide"),i.flashMessage(t.status,t.message),"success"==t.status&&(e.leftSecs+=3600,e.deadline=(new Date).getTime()+1e3*e.leftSecs),localStorage.addTimeManual="",r=!1})})})}},{key:"timeFormater",value:function(e){e<0&&(e=0);var t=Math.floor(e/60),n=e%60;return t=t<10?"0"+t:t,n=n<10?"0"+n:n,t+":"+n}}]),e}();e.exports=c},109:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=this,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=$("#jinja-data").data();!function(){function e(){o(this,e),this.$askquestion=$("#askquestion"),this.$title=this.$askquestion.find("[name=title]")}a(e,[{key:"setup",value:function(){}},{key:"search",value:function(){this.$title.on("keypress",n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)})))}}])}();$("#askquestion [name=title]").on("keyup",function(){var e=this,t=$(this).val();$.get("/search/json",{search:t,category:"question"}).done(function(t){if(t.data.length){for(var n=t.data,o=$('<div class="search-autocomplete"></div>'),r=0;r<n.length;r++){var a=$('<a href="/search?search='+encodeURIComponent(n[r])+'" target="_blank"></a>');a.text(n[r]),o.append(a)}$("body").append(o),$(".search-autocomplete").css({position:"fixed",top:$(e).offset().top+$(e).height()+14,left:$(e).offset().left,width:$(e).width()+26,padding:"4px",border:"solid 1px #ccc","border-top":"none",background:"#fff","z-index":1200}).find("a").css({display:"block",padding:"6px 8px",color:"#4c5157","font-size":"13px"}).hover(function(){$(this).css({color:"#fff",background:"#0c9","text-decoration":"none"}),$(e).val($(this).text())},function(){$(this).css({color:"#4c5157",background:"#fff"})}),$("#askquestion .modal-content, .search-autocomplete").on("mouseleave click",function(){$(".search-autocomplete").remove()})}setTimeout(function(){$(e).focus()},50)})});var s=$("#askquestion"),c=!1;localStorage.courseError=!1,$(".btn-err-correction").on("click",function(){return c=!0,localStorage.courseError=!0,s.modal("show"),!1}),s.on("show.bs.modal",function(){c?(s.find(".modal-title").text("课程纠错"),s.find("textarea").attr("placeholder","出错位置和错误信息描述"),s.find(".list-group").parents(".form-group").hide(),s.find(".bottom-link").attr("href",i.jiucuoUrl).text("奖励机制"),s.find(".mkeditor-btn-img").css("display","block"),s.find(".question-btn-img").css("display","none")):(s.find(".modal-title").text("提问"),s.find("textarea").attr("placeholder","推荐使用 Markdown 语法，至少输入 5 个字\nPS:你能提供信息越多，越有助于高效解决你的问题：\n\n1.清晰描述你的问题\n2.贴上相关代码和报错信息\n3.贴上相关截图\n4.说明已经尝试过的无效方案"),s.find(".list-group").parents(".form-group").show(),s.find(".mkeditor-btn-img").css("display","none"),s.find(".question-btn-img").css("display","block"))}),s.on("hide.bs.modal",function(){c=!1,localStorage.courseError=!1}),function(){var e=n(regeneratorRuntime.mark(function e(){var t,n,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(i.courseQuestion);case 2:for(t=e.sent,n=t.data,o=[],o.push('\n        <div class="form-group">\n        <label class="col-md-2 control-label">相关问题</label>\n        <div class="col-md-10">\n        <ul class="list-group">\n    '),n.total>5&&(n.total=5),a=0;a<n.total;a++)o.push('\n            <a class="list-group-item" href="'+n.items[a].url+'" target="_blank">\n            '+n.items[a].title+"\n            </a>\n        ");5==n.total&&o.push('\n            <li class="list-group-item">\n                <a class="more-questions" href="'+i.courseQuestions+'" target="_blank">查看所有</a>\n            </li>\n        '),o.push("</ul></div></div>"),s='<div class="question">还没有与此课程相关的问题</div>',$("#askquestion form").append(o.join("")||s);case 12:case"end":return e.stop()}},e,r)}));return function(){return e.apply(this,arguments)}}()()},11:function(e,t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return e.is_member&&(n='\n            <a class="member-icon" href="/vip" target="_blank">\n                <img src="'+e.member_icon+'">\n            </a>'),'\n        <div class="user-avatar '+t+'">\n            <a class="avatar" href="'+e.home_page+'" target="_blank">\n                <img src="'+e.avatar+'">\n            </a>\n            '+n+"\n        </div>"}function o(e){return'\n        <div class="user-username">\n            <a class="username" href="'+e.home_page+'" target="_blank">\n                '+e.name+'\n            </a>\n            <span class="user-level">L'+e.level+"</span>\n        </div>"}e.exports={userAvatar:n,userName:o}},110:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(4),s=n(131),c=n(6),l=$("#jinja-data").data(),u=function(){function e(){r(this,e),this.$tools=$("#tools"),this.$toggleToolsBtn=$(".tools-toggle span"),this.$showTools=$(".tools-toggle .show-tools"),this.$hideTools=$(".tools-toggle .hide-tools"),this.$saveVmModal=$("#save-vm-modal"),this.saveVmModalBtn=".confirm",this.$stopLabModal=$("#stop-lab-modal"),this.stopLabBtn=".confirm",this.$stopLabOnFail=$("#desktop-connect-failed"),this.$nextLabModal=$("#next-lab-modal"),this.$nextLabBtn=$("#next-lab-modal .confirm"),this.$continueNextLab=$(".course-lab-learn.continue-next-lab"),this.$fullscreenBtn=$(".fullscreen-btn"),this.setup()}return a(e,[{key:"setup",value:function(){this.toggleBtn(),this.showTools(),this.hideTools(),this.saveVm(l.saveVm),this.stopLab(l.stopLab,l.userlabId,l.courseDetails,l.labName),this.nextLab(l.nextLab,l.labLiveUrl,l.nextLabHasLive,l.liveIsOpen,l.liveIsFinished,l.liveReplayUrl),this.fullscreen()}},{key:"toggleBtn",value:function(){var e=this;this.$toggleToolsBtn.on("click",function(){return e.$toggleToolsBtn.css("display","inline-block"),$(this).hide(),!1})}},{key:"showTools",value:function(){var e=this;this.$showTools.on("click",function(){return e.$tools.animate({right:0},500),!1})}},{key:"hideTools",value:function(){var e=this;this.$hideTools.on("click",function(){return e.$tools.animate({right:-e.$tools.width()-1},500),!1})}},{key:"stopLab",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=this,i=$("#new-loading-modal").find(".loading-wrapper"),s=0;this.$stopLabModal.on("click",this.stopLabBtn,o(regeneratorRuntime.mark(function o(){var l,u,d,f,h;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return localStorage.nextLab=!1,a.$stopLabModal.modal("hide"),l={userlab:t},$(this).hasClass("save-vm")?(l.destroy_env=0,u=0,d=" ",i.html('<span class="save-vm-load">正在保存实验环境&nbsp;<span class="dots"></span></span>'),f=i.find(".dots"),s=setInterval(function(){u+=1,u>3?(d="",u=0):d+=".",f.text(d)},1e3),c.showLoad(!0,!1)):c.show(),o.next=6,$.post(e,l);case 6:return h=o.sent,h&&s&&(clearInterval(s),i.html('<span class="save-vm-load">环境已经保存为：'+r+" </span>")),setTimeout(function(){window.location.href=n},1e3),o.abrupt("return",!1);case 10:case"end":return o.stop()}},o,this)}))),this.$stopLabOnFail.on("click",".stopLabBtn",o(regeneratorRuntime.mark(function o(){var r,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a.$stopLabOnFail.modal("hide"),c.show(),r={userlab:t},o.next=5,$.post(e,r);case 5:return i=o.sent,setTimeout(function(){window.location.href=n},1e3),o.abrupt("return",!1);case 8:case"end":return o.stop()}},o,this)})))}},{key:"nextLab",value:function(e,t,n,r,a,s){var c=this,l=this;this.$nextLabBtn.on("click",o(regeneratorRuntime.mark(function o(){var l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(localStorage.nextLab=!0,!n){o.next=5;break}r&&(a?s&&(window.location.href=t):window.location.href=t),o.next=9;break;case 5:return o.next=7,$.post(e);case 7:l=o.sent,"success"==l.status?window.location.href=l.nexturl:(c.$nextLabModal.modal("hide"),i.flashMessage(l.status,l.message));case 9:return o.abrupt("return",!1);case 10:case"end":return o.stop()}},o,c)}))),this.$continueNextLab.on("click",function(){l.$nextLabBtn.trigger("click")})}},{key:"saveVm",value:function(e){var t=this;this.$saveVmModal.on("click",this.saveVmModalBtn,o(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.$saveVmModal.modal("hide"),c.show(),n.next=4,$.post(e);case 4:return o=n.sent,c.hide(),i.flashMessage(o.status,o.message),n.abrupt("return",!1);case 8:case"end":return n.stop()}},n,t)})))}},{key:"fullscreen",value:function(){this.$fullscreenBtn.on("click",function(){s.enabled&&s.toggle()})}}]),e}();e.exports=u},12:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e),this.$lastModal=null,this.setup()}return o(e,[{key:"setup",value:function(){var e=this;$(document).on("show.bs.modal",".modal",function(){e.$lastModal&&e.$lastModal.attr("id")!=this.id&&e.$lastModal.modal("hide"),e.$lastModal=$(this)})}}]),e}();new r},13:function(e,t){e.exports=function(e,t){for(var n=[],o={},r=0;r<t.length;r++){var a=t[r],i=a[0],s=a[1],c=a[2],l=a[3],u={id:e+":"+r,css:s,media:c,sourceMap:l};o[i]?o[i].parts.push(u):n.push(o[i]={id:i,parts:[u]})}return n}},131:function(e,t){/*!
* screenfull
* v3.3.2 - 2017-10-27
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==e&&e.exports,o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,r=n.length,a={};o<r;o++)if((e=n[o])&&e[1]in t){for(o=0;o<e.length;o++)a[n[0][o]]=e[o];return a}return!1}(),a={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e){var n=r.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](o&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var o=a[e];o&&t.addEventListener(o,n,!1)},off:function(e,n){var o=a[e];o&&t.removeEventListener(o,n,!1)},raw:r};if(!r)return void(n?e.exports=!1:window.screenfull=!1);Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i}()},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=n.n(o),a=n(25),i=n.n(a),s=n(26),c=n.n(s),l=n(24),u=n.n(l);$("#base-data").data();$("#header-message").length&&new r.a({el:"#header-message",render:function(e){return e(i.a)}}),$("#index-header-message").length&&new r.a({el:"#index-header-message",render:function(e){return e(i.a)}}),$("#header-userbox").length&&new r.a({el:"#header-userbox",render:function(e){return e(c.a)}}),$("#index-header-userbox").length&&new r.a({el:"#index-header-userbox",render:function(e){return e(c.a)}}),$("#header-learn-info").length&&new r.a({el:"#header-learn-info",render:function(e){return e(u.a)}})},141:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e),this.url=window.location.href,this.search=window.location.search.substring(1),this.args=this.search?this.search.split("&"):[],this.argsObj={},this.isClient=null,this.isSharePage=null,this.setup()}return o(e,[{key:"setup",value:function(){var e=this;this.args.forEach(function(t,n,o){var r=t.split("=");e.argsObj[r[0]]=r[1]}),"true"==this.argsObj.client?this.isClient=!0:this.isClient=!1,"true"==this.argsObj.vm_tips?this.vmTips=!0:this.vmTips=!1,/share/.test(this.url)?this.isSharePage=!0:this.isSharePage=!1}}]),e}();e.exports=r},142:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e),this.$box=$('<div id="message-box"></div>'),this.setup()}return o(e,[{key:"setup",value:function(){var e=this;$("body").append(this.$box),this.styles(this.$box),this.$box.on("click",".message-close",function(){e.remove($(this).parent(".message-item"))})}},{key:"addLevelMsg",value:function(e){e=parseInt(e);var t=$(this.levelTemplate(e));this.$box.append(t),t.fadeIn("slow"),this.handleRemove(t)}},{key:"addLabMsg",value:function(e){var t=this;if("true"==localStorage.hideLabMsg)return!1;var n=$(this.labTemplate(e));this.$box.append(n),n.fadeIn("slow"),this.handleRemove(n),n.on("click",".silence-lab-msg-btn",function(){localStorage.hideLabMsg=!0,t.remove(n)})}},{key:"handleRemove",value:function(e){var t=this,n=setTimeout(function(){t.remove(e)},8e3);e.on("mouseenter",function(){clearTimeout(n)}),e.on("mouseleave",function(){n=setTimeout(function(){t.remove(e)},8e3)})}},{key:"remove",value:function(e){e.fadeOut("slow",function(){e.remove()})}},{key:"labTemplate",value:function(e){var t=e.url,n=(e.course_id,e.user_level,e.user_name),o=e.type,r="";return"question"===o?r='\n                <div class="message-content message-strong">\n                    <span>'+n+" 发表了提问</span>\n                </div>\n            ":"labreport"===o&&(r='\n                <div class="message-content message-strong">\n                    <span>'+n+" 发布了实验报告</span>\n                </div>\n            "),'\n            <div class="message-item">\n                <span class="message-close">\n                    <i class="fa fa-times" aria-hidden="true"></i>\n                </span>\n                '+r+'\n                <div class="btns">\n                    <div class="btn-group">\n                        <a href="'+t+'" class="btn btn-success" target="_blank">查看详情</a>\n                        <a class="btn stat-event silence-lab-msg-btn" data-stat="hide_dynamic_message">不再提醒</a>\n                    </div>\n                </div>\n            </div>\n        '}},{key:"levelTemplate",value:function(e){return'\n            <div class="message-item">\n                <span class="message-close">\n                    <i class="fa fa-times" aria-hidden="true"></i>\n                </span>\n                '+(e%10==0?'<div class="message-content message-strong">\n                <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>\n                <span>到达 '+e+' 楼，获得1颗实验豆奖励！<img src="https://static.shiyanlou.com/img/shiyandou.png"></span>\n            </div>':'<div class="message-content">\n                <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>\n                <span>恭喜你更上一层楼，已经达到 '+e+" 楼！</span>\n            </div>")+"\n            </div>\n        "}},{key:"styles",value:function(){$("html > head").append("\n            <style>\n            #message-box {\n                position: fixed;\n                right: 20px;\n                bottom: 20px;\n                padding: 10px;\n                z-index: 100;\n            }\n            .message-item {\n                display: none;\n                position: relative;\n                width: 200px;\n                padding: 20px;\n                margin: 0;\n                background: rgba(39,39,39,.8);\n                border-radius: 4px;\n                overflow: hidden;\n            }\n            .message-content {\n                margin-bottom: 20px;\n                color: #d0b089;\n                font-size: 16px;\n            }\n            .message-content a {\n                color: #ccc;\n                text-decoration: none;\n            }\n            .message-content a:focus,\n            .message-content a:hover {\n                color: #fff;\n                text-decoration: none;\n            }\n            .message-strong {\n                color: #f4a63f;\n            }\n            .message-close {\n                position: absolute;\n                right: 0;\n                top: 0;\n                padding: 4px;\n                color: #f4a63f;\n                cursor: pointer;\n            }\n            .btns {\n                font-size: 12px;\n            }\n            .btns .btn-group {\n                margin: 0;\n                padding: 0;\n            }\n            .btns .btn {\n                font-size: 12px;\n            }\n            .btns .silence-lab-msg-btn {\n                color: #ccc;\n            }\n            .btns .silence-lab-msg-btn:focus,\n            .btns .silence-lab-msg-btn:hover {\n                color: #fff;\n            }\n            </style>\n        ")}}]),e}(),a=new r;e.exports=a},143:function(e,t){function n(e){function t(){4==i.queue("step").length&&i.dequeue("step");i.promise("step");localStorage.loadingLab=setInterval(function(){i.dequeue("step")},2e3)}function n(){clearInterval(+localStorage.loadingLab),i.clearQueue("step"),i.find("p").hide()}!function(){e?(n(),i.css("padding-top","5px"),i.queue("step",function(){i.find(".loading-step-0").fadeIn()})):i.css("padding-top","16px"),i.queue("step",function(){i.find(".loading-step-1").fadeIn()}),i.queue("step",function(){i.find(".loading-step-2").fadeIn()}),i.queue("step",function(){i.find(".loading-step-3").fadeIn()}),t()}()}function o(e){if(e){var t=$(e);a.css({top:t.offset().top,left:t.offset().left,width:t.width(),height:t.height()})}a.show(),n()}function r(){a.css({top:0,left:0,width:"auto",height:"auto"}),a.hide()}var a=$(".loading-lab"),i=a.find(".loading-lab-msg");e.exports={show:o,hide:r,showMsg:n}},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=$("#header-learn-info").data()||{};t.default={data:function(){return{show:!1,currentLab:o.currentLab,currentLabName:o.currentLabName,labUrl:o.labContinueUrl,viewAll:o.viewAllUrl,homePage:o.homePage}},methods:{myHome:function(){window.location.href=this.homePage}}}},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),r=n.n(o),a=$("#header-message").data()||{};t.default={data:function(){return{screenWidth:document.body.clientWidth,href:a.href,hasMsg:a.hasMsg,msgPage:a.msgPage,show:!1,timer:!1,isNotMobile:!0,data:{}}},watch:{screenWidth:function(e){var t=this;this.timer||(this.screenWidth=e,this.timer=!0,setTimeout(function(){t.screenWidth<=769?t.isNotMobile=!1:t.isNotMobile=!0,t.timer=!1},500))}},mounted:function(){var e=this;this.screenWidth<=769&&(this.isNotMobile=!1),r.a.on("event:msg:new",function(t){e.data=t,e.hasMsg=!0,e.show=!0}),$(window).on("resize",function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth})}}},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=$("#header-userbox").data()||{};t.default={data:function(){return{is_hidden:!1,inviteBtnText:"邀请好友",screenWidth:document.body.clientWidth,username:o.username,level:o.level,labCount:o.labCount,todayStudyTime:o.todayStudyTime,home:o.home,vip:o.vipIndex,contribute:o.contribute,setting:o.setting,logout:o.logout,avatar:o.avatar,start:o.start,qq:o.qq,qzone:o.qzone,weibo:o.weibo,isMember:o.isMember,memberIndex:o.memberIndex,isSeniorMember:o.isSeniorMember,memberIcon:o.memberIcon,labname:o.labname,startLab:o.startLab,clear:o.clear,run:o.run,show:!1,timer:!1,useMobile:!1,hasMemberVm:o.hasMemberVm,sameVM:o.sameVm,value:o.value,saveVm:o.saveVm,memberVmIcon:o.memberVmIcon}},watch:{screenWidth:function(e){var t=this;this.timer||(this.screenWidth=e,this.timer=!0,setTimeout(function(){t.screenWidth<=768?t.useMobile=!0:t.useMobile=!1,t.timer=!1},500))}},methods:{LinkOver:function(){this.is_hidden=!0,this.inviteBtnText="复制邀请链接"},LinkLeave:function(){this.is_hidden=!1,this.inviteBtnText="邀请好友"}},mounted:function(){var e=this;this.screenWidth<=768&&(this.useMobile=!0),$(window).on("resize",function(){window.screenWidth=document.body.clientWidth,e.screenWidth=window.screenWidth})}}},18:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\n.fade-enter-active[data-v-07a2dd56],\n.fade-leave-active[data-v-07a2dd56] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-07a2dd56],\n.fade-leave-active[data-v-07a2dd56] {\n  opacity: 0;\n}\n.header-message[data-v-07a2dd56] {\n  position: relative;\n  margin-right: 5px;\n}\n.header-message > a[data-v-07a2dd56] {\n  position: relative;\n}\n.header-message > a .fa-bell-o[data-v-07a2dd56] {\n    font-size: 22px;\n    margin-top: -3px;\n}\n.popover[data-v-07a2dd56] {\n  display: block;\n  position: absolute;\n  top: 50px;\n  left: -66px;\n  width: 180px;\n  background: #fff;\n}\n.popover .msg-content[data-v-07a2dd56] {\n    padding: 8px;\n    font-size: 14px;\n    text-align: center;\n}\n.popover .msg-content a[data-v-07a2dd56] {\n      color: #f66;\n}\n.popover .msg-content a[data-v-07a2dd56]:focus, .popover .msg-content a[data-v-07a2dd56]:hover {\n        text-decoration: none;\n}\n.mark[data-v-07a2dd56] {\n  position: absolute;\n  top: 18px;\n  right: 15px;\n  width: 1px;\n  height: 1px;\n  background: #f66;\n  border-radius: 50%;\n}\n@media (max-width: 768px) {\n.mark[data-v-07a2dd56] {\n    top: 14px;\n    right: calc(50% - 8px);\n}\n}\n",""])},19:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\n.header-learn-info[data-v-33ac7940] {\n  float: right;\n  width: 100%;\n  padding: 23.5px 10px;\n  margin: 0;\n  position: relative;\n}\n.header-learn-info > span[data-v-33ac7940] {\n    font-size: 16px;\n    color: #666;\n}\n.header-learn-info > span img[data-v-33ac7940] {\n      transform: rotate(-90deg);\n}\n.header-learn-info > span[data-v-33ac7940]:hover {\n      cursor: pointer;\n}\n.home-page[data-v-33ac7940] {\n  color: #666;\n}\n.home-page[data-v-33ac7940]:hover {\n    text-decoration: none;\n    color: #08bf91;\n}\n@media (min-width: 768px) {\n.header-learn-info[data-v-33ac7940] {\n    width: auto;\n}\n}\n@media (max-width: 1200px) {\n.header-learn-info[data-v-33ac7940] {\n    display: none;\n}\n}\n.fade-enter-active[data-v-33ac7940],\n.fade-leave-active[data-v-33ac7940] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-33ac7940],\n.fade-leave-active[data-v-33ac7940] {\n  opacity: 0;\n}\n.learninfo-box[data-v-33ac7940] {\n  display: block;\n  width: 223px;\n  margin-top: 60px;\n  margin-bottom: 20px;\n  padding: 20px;\n  left: 35px;\n  background: #fff;\n  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.2);\n  border: none;\n}\n.learninfo-box .lab-running > span[data-v-33ac7940] {\n    font-size: 14px;\n    color: #a4a4a4;\n}\n.learninfo-box .lab-running .lab-running-name[data-v-33ac7940] {\n    font-size: 14px;\n    padding: 10px 0;\n}\n.learninfo-box .lab-running .lab-running-name > span[data-v-33ac7940] {\n      max-width: 60%;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      display: inline-block;\n}\n.learninfo-box .lab-running .lab-running-name .lab-continue[data-v-33ac7940] {\n      background: #08bf91;\n      font-size: 12px;\n      color: #fff;\n      border: none;\n      padding: 2px 12px;\n      margin-top: -1px;\n}\n.learninfo-box .learn-records > span[data-v-33ac7940] {\n    font-size: 14px;\n    color: #a4a4a4;\n}\n.learninfo-box .learn-records .records-list[data-v-33ac7940] {\n    margin-top: 10px;\n}\n.learninfo-box .learn-records .records-list .record-item[data-v-33ac7940] {\n      display: inline-block;\n      font-size: 14px;\n      color: #666;\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      margin-bottom: 10px;\n}\n.learninfo-box .learn-records .records-list .record-item[data-v-33ac7940]:hover {\n        text-decoration: none;\n        background-color: #f5f5f5;\n}\n.learninfo-box .learn-records .record-view-all[data-v-33ac7940] {\n    display: inline-block;\n    margin-top: 5px;\n    font-size: 12px;\n}\n.learninfo-box .learn-records .record-view-all[data-v-33ac7940]:hover {\n      text-decoration: none;\n}\n@media (min-width: 768px) {\n.learninfo-box[data-v-33ac7940] {\n    left: -30px;\n    margin-bottom: 0;\n}\n}\n",""])},2:function(e,t,n){function o(e){for(var t=0;t<e.length;t++){var n=e[t],o=u[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(a(n.parts[r]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{for(var i=[],r=0;r<n.parts.length;r++)i.push(a(n.parts[r]));u[n.id]={id:n.id,refs:1,parts:i}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function a(e){var t,n,o=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(o){if(p)return m;o.parentNode.removeChild(o)}if(v){var a=h++;o=f||(f=r()),t=i.bind(null,o,a,!1),n=i.bind(null,o,a,!0)}else o=r(),t=s.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}function i(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function s(e,t){var n=t.css,o=t.media,r=t.sourceMap;if(o&&e.setAttribute("media",o),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(13),u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),f=null,h=0,p=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){p=n;var r=l(e,t);return o(r),function(t){for(var n=[],a=0;a<r.length;a++){var i=r[a],s=u[i.id];s.refs--,n.push(s)}t?(r=l(e,t),o(r)):r=[];for(var a=0;a<n.length;a++){var s=n[a];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete u[s.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},20:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,'\n.hidden[data-v-815c5224] {\n  display: none;\n}\n.show[data-v-815c5224] {\n  display: block;\n}\n.fade-enter-active[data-v-815c5224],\n.fade-leave-active[data-v-815c5224] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-815c5224],\n.fade-leave-active[data-v-815c5224] {\n  opacity: 0;\n}\n.header-userbox a[data-v-815c5224] {\n  display: block;\n  padding: 0;\n}\n.header-avatar[data-v-815c5224] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n}\n.vip-icon[data-v-815c5224] {\n  position: absolute;\n  bottom: 0;\n  right: calc(50% - 30px);\n  width: 20px;\n  height: 20px;\n}\n@media (min-width: 768px) {\n.vip-icon[data-v-815c5224] {\n    right: 0;\n}\n}\n.user[data-v-815c5224] {\n  display: block;\n  position: absolute;\n  top: 50px;\n  left: -150px;\n  width: 300px;\n  height: 320px;\n  padding: 20px;\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 4px 1px #ccc;\n  z-index: 999 !important;\n}\n.user[data-v-815c5224]:before {\n    content: "";\n    position: absolute;\n    top: -20px;\n    right: 0;\n    width: 220px;\n    height: 50px;\n}\n.user.popover > .arrow[data-v-815c5224] {\n    left: 63%;\n}\n.user-info[data-v-815c5224] {\n  overflow: hidden;\n}\n.user-info a[data-v-815c5224] {\n    float: left;\n}\n.user-info a img[data-v-815c5224] {\n      width: 50px;\n      height: 50px;\n      margin-right: 10px;\n      border-radius: 50%;\n}\n.username[data-v-815c5224] {\n  position: relative;\n}\n.username > img[data-v-815c5224] {\n    width: 20px;\n    position: absolute;\n    left: -30px;\n    bottom: 10px;\n}\n.username > span[data-v-815c5224] {\n    display: inline-block;\n    max-width: 150px;\n    color: #666;\n    font-size: 16px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    vertical-align: middle;\n    white-space: nowrap;\n}\n.username > span.user-level[data-v-815c5224] {\n      color: #fec42d;\n      font-size: 14px;\n      font-weight: 700;\n}\n.username > p[data-v-815c5224] {\n    color: #A4A4A4;\n    font-size: 12px;\n    margin-top: 10px;\n    overflow: hidden;\n    white-space: nowrap;\n    width: 170px;\n    text-overflow: ellipsis;\n}\n.marked-words[data-v-815c5224] {\n  width: 100%;\n  color: #A4A4A4 !important;\n  font-size: 12px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  text-align: center;\n  position: absolute;\n  top: 130px;\n  left: 0;\n}\n.marked-words > a[data-v-815c5224] {\n    color: #A4A4A4 !important;\n    font-size: 12px;\n}\n.marked-words > a[data-v-815c5224]:hover, .marked-words > a[data-v-815c5224]:focus {\n      text-decoration: none;\n      color: #A4A4A4;\n}\n.start-experiment > a[data-v-815c5224] {\n  display: inline-block;\n  width: 240px;\n  height: 35px;\n  line-height: 35px;\n  background-color: #08BF91;\n  border-radius: 100px;\n  text-align: center;\n  margin-top: 10px;\n  font-size: 14px;\n  text-decoration: none;\n  color: #fff;\n}\n.start-experiment > a[data-v-815c5224]:hover, .start-experiment > a[data-v-815c5224]:focus {\n    text-decoration: none;\n    color: #fff;\n}\n.user-links[data-v-815c5224] {\n  margin-top: 30px;\n}\n.user-links .row > div[data-v-815c5224] {\n    padding-right: 0;\n    padding-left: 10px;\n}\n.user-links .row a[data-v-815c5224],\n  .user-links .row .invite-user-btn[data-v-815c5224] {\n    width: 115px;\n    height: 30px;\n    line-height: 30px;\n    margin: 5px 0 10px;\n    color: #666;\n    font-size: 14px;\n    text-align: center;\n    border-radius: 20px;\n    border: 1px solid #eee;\n    *display: inline;\n    *zoom: 1;\n}\n.user-links .row a[data-v-815c5224]:focus, .user-links .row a[data-v-815c5224]:hover,\n    .user-links .row .invite-user-btn[data-v-815c5224]:focus,\n    .user-links .row .invite-user-btn[data-v-815c5224]:hover {\n      text-decoration: none;\n}\n.user-links .row a[data-v-815c5224]:hover,\n    .user-links .row .invite-user-btn[data-v-815c5224]:hover {\n      background: #eee;\n}\n.user-links .invite-user-btn[data-v-815c5224] {\n    margin: 0 !important;\n}\n.user-links a.member-index[data-v-815c5224] {\n    border: 1px solid #f66;\n    color: #f66;\n}\n.user-links a.member-index[data-v-815c5224]:hover, .user-links a.member-index[data-v-815c5224]:focus {\n      background: #f66;\n      color: #fff;\n}\n.feedback[data-v-815c5224] {\n  font-size: 12px;\n  color: #C6C6C6;\n  margin-top: 35px;\n  margin-left: calc(50% - 96px);\n}\n.friendly-link[data-v-815c5224] {\n  margin-top: 10px;\n}\n.friendly-link .invite-user[data-v-815c5224] {\n    width: 240px;\n    color: #C6C6C6;\n    font-size: 12px;\n}\n.friendly-link .invite-user img[data-v-815c5224] {\n      width: 18px;\n      height: 18px;\n}\n.friendly-link .invite-user a[data-v-815c5224] {\n      display: inline-block;\n      width: 18px;\n}\n.log-out[data-v-815c5224] {\n  display: block;\n  border-top: 1px solid #eee;\n  margin-top: 10px;\n  padding-top: 20px;\n  width: 100%;\n  text-align: right;\n}\n.log-out a[data-v-815c5224] {\n    display: inline-block;\n    color: #999;\n    font-size: 14px;\n}\n.log-out a[data-v-815c5224]:hover, .log-out a[data-v-815c5224]:focus {\n      text-decoration: none;\n      color: #999;\n}\n.invite-user-link[data-v-815c5224] {\n  display: none;\n}\n.invite-user-msg[data-v-815c5224] {\n  position: absolute;\n  bottom: -20px;\n}\n.no_member_vm[data-v-815c5224] {\n  background: #ddd !important;\n}\n.no_member_vm .memberVmIcon[data-v-815c5224] {\n    margin-left: 5px;\n}\n.is-member[data-v-815c5224] {\n  cursor: default;\n}\n',""])},21:function(e,t,n){var o=n(18);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},22:function(e,t,n){var o=n(19);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},23:function(e,t,n){var o=n(20);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},24:function(e,t,n){n(31);var o=n(0)(n(15),n(28),"data-v-33ac7940",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/learnInfo.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] learnInfo.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},25:function(e,t,n){n(30);var o=n(0)(n(16),n(27),"data-v-07a2dd56",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/message.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] message.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},26:function(e,t,n){n(32);var o=n(0)(n(17),n(29),"data-v-815c5224",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/userbox.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] userbox.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},27:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"header-message"},[n("a",{attrs:{href:e.href}},[n("i",{staticClass:"fa fa-bell-o"}),e._v(" "),e.hasMsg?n("div",{staticClass:"mark"}):e._e()]),e._v(" "),e.isNotMobile?n("transition",{attrs:{name:"fade"}},[e.show?n("div",{staticClass:"popover bottom fade in",on:{mouseleave:function(t){e.show=!1}}},[n("div",{staticClass:"arrow"}),e._v(" "),n("div",{staticClass:"msg-content"},[n("a",{attrs:{href:e.msgPage}},[e._v("有新消息啦～")])])]):e._e()]):e._e()],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},28:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-nav header-learn-info",on:{mouseover:function(t){e.show=!0},mouseleave:function(t){e.show=!1}}},[n("span",{attrs:{"data-toggle":"dropdown"}},[e.currentLab?n("img",{attrs:{src:"/static/img/trylab/icon-lab-running.gif",alt:"running"}}):e._e(),e._v("\n         "),n("a",{staticClass:"home-page",attrs:{href:e.homePage,title:""},on:{click:function(t){e.myHome()}}},[e._v("我的学习")])]),e._v(" "),e.currentLab?n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"popover bottom fade in learninfo-box"},[e.currentLab?n("div",{staticClass:"lab-running"},[n("span",[e._v("正在实验")]),e._v(" "),n("div",{staticClass:"lab-running-name"},[n("span",[e._v(e._s(e.currentLabName))]),e._v(" "),n("a",{staticClass:"btn btn-sm btn-danger pull-right lab-continue",attrs:{type:"button",href:e.labUrl}},[e._v("继续实验")])])]):e._e()])]):e._e()],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},29:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"header-userbox",class:{dropdown:e.useMobile},on:{mouseover:function(t){e.show=!0},mouseleave:function(t){e.show=!1}}},[n("a",{class:{"dropdown-toggle":e.useMobile},attrs:{"data-toggle":"dropdown disabled",href:e.home}},[n("img",{staticClass:"header-avatar",attrs:{src:e.avatar}}),e._v(" "),e.isMember?n("img",{staticClass:"vip-icon",attrs:{src:e.memberIcon}}):e._e(),e._v(" "),e.useMobile?n("span",{staticClass:"caret"}):e._e()]),e._v(" "),e.useMobile?n("ul",{staticClass:"dropdown-menu"},[n("li",[n("a",{attrs:{href:e.home}},[e._v("我的主页")])]),e._v(" "),n("li",[n("a",{attrs:{href:e.setting}},[e._v("个人设置")])]),e._v(" "),n("li",[n("a",{attrs:{href:e.logout}},[e._v("安全退出")])])]):n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"popover bottom fade in user"},[n("div",{staticClass:"arrow"}),e._v(" "),n("div",{staticClass:"user-info"},[n("a",{attrs:{href:e.home}},[n("img",{staticClass:"pull-left",attrs:{src:e.avatar}})]),e._v(" "),n("div",{staticClass:"pull-left username"},[e.isMember?n("img",{attrs:{src:e.memberIcon}}):e._e(),e._v(" "),n("span",[e._v(e._s(e.username))]),e._v(" "),n("span",{staticClass:"user-level"},[e._v("L"+e._s(e.level))]),e._v(" "),n("p",[e._v("今日有效学习"+e._s(e.todayStudyTime)+"min")])])]),e._v(" "),n("div",{staticClass:"start-experiment"},[e.isMember&&e.hasMemberVm?n("a",{staticClass:"oldvm user-vm-btn",attrs:{href:"#","data-clear":e.clear,"data-start":e.startLab,"data-run":e.run}},[n("img",{attrs:{src:e.start}}),e._v("\n                    启动保存的环境\n                ")]):e._e(),e._v(" "),e.isMember&&!e.hasMemberVm?n("a",{staticClass:"no_member_vm is-member",attrs:{href:"javascript:void(0);"}},[n("img",{attrs:{src:e.start}}),e._v("\n                    尚未保存环境\n                ")]):e._e(),e._v(" "),e.isMember?e._e():n("a",{staticClass:"oldvm no_member_vm",attrs:{href:e.memberIndex}},[n("img",{attrs:{src:e.start}}),e._v("\n                    启动保存的环境\n                    "),n("img",{staticClass:"memberVmIcon",attrs:{src:e.memberVmIcon}})]),e._v(" "),e.hasMemberVm&&e.isMember?n("p",{staticClass:"marked-words"},[e._v("最近保存:"+e._s(e.labname))]):e._e(),e._v(" "),!e.hasMemberVm&&e.isMember?n("p",{staticClass:"marked-words"},[n("a",{attrs:{href:e.saveVm}},[e._v("如何保存？")])]):e._e()]),e._v(" "),n("div",{staticClass:"user-links"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6 col-sm-6"},[n("a",{attrs:{href:e.home}},[e._v("我的主页")]),e._v(" "),n("a",{staticClass:"member-index",attrs:{href:e.vip}},[e._v("会员中心")])]),e._v(" "),n("div",{staticClass:"col-md-6 col-sm-6"},[n("a",{attrs:{href:e.setting}},[e._v("个人设置")]),e._v(" "),n("a",{attrs:{href:e.contribute}},[e._v("我要投稿")])])]),e._v(" "),n("div",{staticClass:"log-out"},[n("a",{attrs:{href:e.logout}},[e._v("退出登录")])])])])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},3:function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=f[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(c(o.parts[a],t))}else{for(var i=[],a=0;a<o.parts.length;a++)i.push(c(o.parts[a],t));f[o.id]={id:o.id,refs:1,parts:i}}}}function o(e){for(var t=[],n={},o=0;o<e.length;o++){var r=e[o],a=r[0],i=r[1],s=r[2],c=r[3],l={css:i,media:s,sourceMap:c};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function r(e,t){var n=m(),o=b[b.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function i(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var n,o,r;if(t.singleton){var c=g++;n=v||(v=i(t)),o=l.bind(null,n,c,!1),r=l.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),o=d.bind(null,n),r=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(t),o=u.bind(null,n),r=function(){a(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}function l(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function u(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,o=t.sourceMap;o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var f={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,b=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var r=o(e);return n(r,t),function(e){for(var a=[],i=0;i<r.length;i++){var s=r[i],c=f[s.id];c.refs--,a.push(c)}if(e){n(o(e),t)}for(var i=0;i<a.length;i++){var c=a[i];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete f[c.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},30:function(e,t,n){var o=n(21);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("0c04f9a8",o,!1)},31:function(e,t,n){var o=n(22);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("dad175f8",o,!1)},32:function(e,t,n){var o=n(23);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("c36d7408",o,!1)},33:function(e,t,n){n(56);var o=n(0)(n(39),n(55),"data-v-9b3c8994",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/weibo.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] weibo.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},34:function(e,t,n){function o(e,t){return new a(t).process(e)}var r=n(60),a=n(67);t=e.exports=o,t.FilterCSS=a;for(var i in r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},35:function(e,t){e.exports={indexOf:function(e,t){var n,o;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var o,r;if(Array.prototype.forEach)return e.forEach(t,n);for(o=0,r=e.length;o<r;o++)t.call(n,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}}},36:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=$("#search-box").data()||{};t.default={data:function(){return{searchJson:"/search/json",url:r.url,keyword:"",items:[]}},methods:{search:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.get(e.searchJson,{search:e.keyword});case 3:n=t.sent,n.data.length&&(e.items=n.data),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}},t,e,[[0,7]])}))()},submit:function(){this.keyword.trim()&&(window.location.href=this.url+"?search="+this.keyword)}}}},37:function(e,t,n){"use strict";function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=$("#side-new-contest").data()||{};t.default={data:function(){return{contest:{name:"没有进行中的比赛",url:!1},fetchContest:r.url}},mounted:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get(e.fetchContest);case 2:n=t.sent,n.name&&(e.contest.name=n.name,e.contest.url=n.url);case 4:case"end":return t.stop()}},t,e)}))()}}},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{show:!1,input:"",active:0,emails:["@qq.com","@163.com","@126.com","@yeah.net","@sohu.com","@sina.com","@outlook.com","@gmail.com"]}},watch:{input:function(){/@/.test(this.input)||!this.input?this.show=!1:this.show=!0}},methods:{selectEmail:function(e){return!(!this.show||!this.input)&&(this.input=this.input+this.emails[this.active],this.show=!1,!1)},onMouseenter:function(e){this.active=e},upEvent:function(){this.active-=1,this.active<0&&(this.active=0)},downEvent:function(){this.active+=1,this.active>this.emails.length-1&&(this.active=this.emails.length-1)}}}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["isBtn","path","title","pic","icon","isLeft","url"],data:function(){return{href:"",params:{title:this.title,appkey:"1343713053",pic:this.pic&&this.pic.length?this.pic:["https://static.shiyanlou.com/img/logo-base.png"],searchPic:!1,url:this.url},weiboUrl:this.url?"http://service.weibo.com/share/share.php?url="+this.url+" ":"http://service.weibo.com/share/share.php?url=https://www.shiyanlou.com"}},mounted:function(){this.href=""+this.weiboUrl+this.path+"&title="+encodeURIComponent(this.params.title)+"&appkey="+this.params.appkey+"&pic="+this.params.pic.join("||")+"&searchPic="+this.params.searchPic}}},4:function(e,t,n){function o(e,t,n,o){var r;"function"!=typeof n||o?"function"==typeof o&&(r=o):(r=n,n=null),!0===e&&(e="success"),!1===e&&(e="error");var a=$("#flash-message"),n=parseInt(n)||3e3,e="error"==e?"danger":e,i='<div class="alert alert-'+e+'" style="text-align: center;">\n                    <img class="img-status" src="/static/img/modal/icon-'+e+'.png" alt="">\n                    '+t+"\n                </div>";a.find(".modal-dialog").html(i),a.modal("show"),$("body").css({"padding-right":"0",overflow:"auto"}),a.on("hidden.bs.modal",function(){r&&r()}),$(".modal-backdrop").hide(),setTimeout(function(){$("body").removeClass("modal-open"),a.modal("hide"),$("body").removeAttr("style")},n)}function r(){o("error","操作过于频繁，请稍后重试")}function a(e,t,n){var o=$("#modal-message"),e="error"==e?"danger":e,r='<div class="alert alert-'+e+'" style="text-align: center;">'+t+"</div>";n&&"string"==typeof n&&o.find(".modal-title").html(n),o.find(".modal-body").html(r),o.modal("show")}function i(e,t,n){$.get(e).done(function(e){if("success"==e.status){var o=e.rank,r="";r+='<div class="sidebox users-top"><div class="sidebox-header users-top-header"><h4 class="sidebox-title">学习排名<span>（有效学习时间）</span></h4></div>';for(var a=0,i=o.length;a<i;a++)r+='<div class="clearfix sidebox-body users-top-body"><div class="pull-left users-top-left">'+g.userAvatar(o[a],"pull-left")+'<div class="users-top-info pull-left">'+g.userName(o[a])+'<br><span class="users-top-study-time">'+o[a].study_time+' 分钟</span></div></div><div class="pull-right users-top-right"><img src="'+o[a].image+'"></div></div>';r+="</div>","html"==n?$(t).html(r):$(t).append(r)}})}function s(e){return $("<div/>").text(e).html()}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMMDo HH:mm";return v(e).format(t)}function l(e){return v(e).add(8,"hours")}function u(e,t,n){localStorage.newLab=!0,$.post(e,n||{}).done(function(e){e.ok?$(window).width()<769?(b.showLoad(!1),window.location.href=t):setTimeout(function(){b.showLoad(!1),window.location.href=e.nexturl},2e3):e.nexturl?window.location.href=e.nexturl:(b.showLoad(!1),o(e.ok,e.message))}).fail(function(e){b.showLoad(!1);var t=JSON.parse(e.responseText);o(t.ok,t.message)})}function d(){function e(e){var t=$(e).data("url"),n=$(e).data("mobileUrl");return b.showLoad(),u(t,n),!1}var t=void 0;$(".challenge-start-btn").on("click",function(){return t=this,e(this),!1}),$(".lab-item-start").on("click",function(){return t=this,e(this),!1}),$(".lab-item-start-newlab").on("click",function(){if($(this).hasClass("lab-item-started"))window.location.href=$("#header-continue-lab").attr("href");else{var e=$(this).data("url"),t=$(this).data("mobileUrl");$("#start-newlab").modal("show"),$(".start-newlab-confirm").off("click").on("click",function(){$("#start-newlab").modal("hide"),b.show(),$.post(w.startNewlabUrl,{userlab:userlabId}).done(function(n){n.ok?setTimeout(function(){u(e,t)},3e3):(b.showLoad(!1),o(n.ok,n.message))}).fail(function(e){b.showLoad(!1);var t=JSON.parse(e.responseText);o(t.ok,t.message)})})}})}function f(){$(".resize-img").each(function(){var e=new Image,t=$(this).data().width,n=$(this).data().height,o=0,r=0;if(!$(this).attr("src"))return!1;e.src=$(this).attr("src"),e.width>0&&e.height>0&&(e.width/e.height>=t/n?e.width>t?(o=t,r=Math.ceil(e.height*t/parseInt(e.width))):(o=e.width,r=e.height):e.height>n?(r=n,o=Math.ceil(e.width*n/parseInt(e.height))):(r=e.height,o=e.width),$(this).css({width:o+"px",height:r+"px",opacity:"1"}))})}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".invite-user-btn",t=new Clipboard(e);$(".invite-user-link").val();t.on("success",function(e){$(".invite-user-msg").html('<div class="alert alert-success">复制成功</div>'),setTimeout(function(){$(".invite-user-msg").html("")},1e3),e.clearSelection()})}function p(){var e="我正在实验楼撸代码，你也快来！800+编程实战教程，无需搭环境，直接练习！用我的链接注册，你我都能获得3个实验豆！",t=$(".invite-user-link").val();!function(){var n=[],o={url:t,desc:e,summary:"实验楼是国内领先的IT技术实训平台，\n                创新的实验驱动教学模式，\n                以就业为导向，为IT相关专业的在校学生及从业者提供编程、\n                运维、测试、云计算、大数据、数据库等全面的IT技术动手实践环境，\n                提供Linux、Python、Java、C语言、Ruby、Android、IOS开发等热门课程。",title:"实验楼 - 国内领先的IT技术实训平台",site:"实验楼",pics:"http://7oxjrf.com2.z0.glb.qiniucdn.com/20150811/logo-email.png"};for(var r in o)n.push(r+"="+encodeURIComponent(o[r]||""));var a="http://connect.qq.com/widget/shareqq/index.html?"+n.join("&");$(".invite-user .invite-qq").on("click",function(){return window.open(a,"_blank"),!1})}(),function(){var n=[],o={url:t,showcount:"0",desc:e,summary:"实验楼是国内领先的IT技术实训平台，\n                创新的实验驱动教学模式，以就业为导向，\n                为IT相关专业的在校学生及从业者提供编程、\n                运维、测试、云计算、大数据、数据库等全面的IT技术动手实践环境，\n                提供Linux、Python、Java、C语言、Ruby、Android、IOS开发等热门课程。",title:"实验楼 - 国内领先的IT技术实训平台",site:"实验楼",pics:"http://7oxjrf.com2.z0.glb.qiniucdn.com/20150811/logo-email.png"};for(var r in o)n.push(r+"="+encodeURIComponent(o[r]||""));var a="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+n.join("&");$(".invite-user .invite-qz").on("click",function(){return window.open(a,"_blank"),!1})}(),function(){var n=[],o={url:t,type:"button",language:"zh_cn",title:e,appkey:1491471478,searchPic:!1};for(var r in o)n.push(r+"="+encodeURIComponent(o[r]||""));var a="http://service.weibo.com/share/share.php?"+n.join("&");$(".invite-user .invite-weibo").on("click",function(){return window.open(a,"_blank"),!1})}()}function m(e){e.each(function(t){function n(){var t=new Date,n=Math.floor((a-t)/1e3);n<=0&&(n=0,clearInterval(i),e.remove());var o=Math.floor(n/86400),s=Math.floor(n/3600)%24,c=Math.floor(n/60)%60,l=n%60;r.text("特价 "+o+"天"+s+"时"+c+"分"+l+"秒")}var o=$(this).data("countDown"),r=$(this).find("span"),a=new Date(o),i=(c(o,"LL HH:mm"),setInterval(n,1e3))})}n(12);var v=n(5),g=n(11),b=n(6),w=$("#jinja-data").data();window.videojs&&(videojs.options.flash.swf="https://static.shiyanlou.com/static/videojs/6.2.8/video-js.swf"),v.locale("zh-cn"),function(e){e.fn.serializeJSON=function(){var t={},n=this.serializeArray();this.serialize();return e(n).each(function(){t[this.name]?e.isArray(t[this.name])?t[this.name].push(this.value):t[this.name]=[t[this.name],this.value]:t[this.name]=this.value}),t}}(jQuery),function(){var e=$("meta[name=csrf-token]").attr("content");$.ajaxSetup({beforeSend:function(t,n){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(n.type)||t.setRequestHeader("X-CSRFToken",e)}})}(),e.exports={escape:s,flashMessage:o,modalMessage:a,usersTop:i,flash429Error:r,formatTime:c,toCST:l,startLab:d,startLabPost:u,resizeImg:f,inviteUser:h,xshare:p,discountDown:m}},40:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(7),s=n(51),c=(n(4),function(){function e(){r(this,e),this.$signModal=$("#sign-modal"),this.$verifyCode=$("#sign-modal .verify-code"),this.$signinForm=$("#signin-form form"),this.$signupForm=$("#signup-form form"),this.$errMsg=this.$signModal.find(".error-msg"),this.needLoginCode=!1,this.next={updated:!1,url:""},this.activeSign="signin",this.errTimer=[],this.setup()}return a(e,[{key:"setup",value:function(){var e=this,t=this;$(document).on("click",'[href="#sign-modal"]',function(){t.activeSign=$(this).data("sign");var e=$(this).data("next");e?t.next={updated:!0,url:e}:t.next.updated=!1}),this.$verifyCode.on("click",function(){t.updateVerifyCode($(this))}),this.$signModal.on("shown.bs.modal",function(){$('[href="#'+t.activeSign+'-form"]').click(),e.updateVerifyCode(e.$verifyCode),e.needLoginCode&&e.showLoginCode()}),this.$signinForm.on("submit",function(){return e.signin(),!1}),this.$signupForm.on("submit",function(){return e.signup(),!1}),this.signupEmail()}},{key:"signupEmail",value:function(){$("#signup-email").length&&new i({el:"#signup-email",render:function(e){return e(s)}})}},{key:"signin",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$signinForm.attr("action"),n=this.$signinForm.find('[name="remember"]'),o={login:this.$signinForm.find('[name="login"]').val(),password:this.$signinForm.find('[name="password"]').val(),captcha_v:this.$signinForm.find('[name="captcha_v"]').val(),remember:n.is(":checked")?n.val():""},o.login){e.next=6;break}return this.errMsg("请输入邮箱"),e.abrupt("return",!1);case 6:if(o.password){e.next=9;break}return this.errMsg("请输入密码"),e.abrupt("return",!1);case 9:return e.next=11,this.ajax(t,o);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"signup",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$signupForm.attr("action"),n={email:this.$signupForm.find('[name="email"]').val(),password:this.$signupForm.find('[name="password"]').val(),captcha_v:this.$signupForm.find('[name="captcha_v"]').val()},n.email){e.next=5;break}return this.errMsg("请输入邮箱"),e.abrupt("return",!1);case 5:if(n.password){e.next=8;break}return this.errMsg("请输入密码"),e.abrupt("return",!1);case 8:if(n.captcha_v){e.next=11;break}return this.errMsg("请输入验证码"),e.abrupt("return",!1);case 11:return e.next=13,this.ajax(t,n);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"ajax",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.ajax({type:"POST",url:t,data:n,xhrFields:{withCredentials:!0}});case 2:if(o=e.sent,this.setNeedLoginCode(o.need_captcha),!o.ok){e.next=15;break}if(this.$signModal.modal("hide"),!o.next){e.next=9;break}return window.location.href=o.next,e.abrupt("return",!1);case 9:if("/login"!=location.pathname){e.next=12;break}return window.location.href="/courses",e.abrupt("return",!1);case 12:this.next.updated?window.location.href=this.next.url:window.location.reload(),e.next=18;break;case 15:this.updateVerifyCode(this.$verifyCode),this.needLoginCode&&this.showLoginCode(),this.errMsg(o.message);case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateVerifyCode",value:function(e){e.attr("src",e.attr("source")+"?"+(new Date).getTime())}},{key:"setNeedLoginCode",value:function(e){this.needLoginCode=!!e,localStorage.needLoginCode=!!e}},{key:"showLoginCode",value:function(){this.$signinForm.find(".verify-code-item").show()}},{key:"errMsg",value:function(e){var t=this;this.errTimer.map(function(e){clearTimeout(e),t.errTimer.pop()}),this.$errMsg.hide(),this.$errMsg.find(".alert").text(""),this.$errMsg.find(".alert").text(e),this.$errMsg.show();var n=setTimeout(function(){t.$errMsg.hide(),t.$errMsg.find(".alert").text(""),t.errTimer.pop()},5e3);this.errTimer.push(n)}}]),e}());new c},41:function(e,t,n){var o=n(8);o&&(o.on("event:user:logout",function(){if(localStorage.isClient)return!1;o.emit("disconnection",""),o.disconnect()}),o.on("event:msg:all_read",function(e){$(".header-msg-count").hide(),$(".header-msg-mark").hide()}))},42:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\n.input-group[data-v-68b3bbad] {\n  position: relative;\n}\nul[data-v-68b3bbad] {\n  position: absolute;\n  top: 33px;\n  z-index: 100;\n  width: calc(100% - 46px);\n  padding: 0;\n  color: #7f7f7f;\n  background: #fff;\n  font-size: 14px;\n  border: solid 1px #ccc;\n  list-style: none;\n}\nul li[data-v-68b3bbad] {\n    padding: 5px 11px;\n    cursor: pointer;\n}\nul li.active[data-v-68b3bbad] {\n      background: #eee;\n}\n",""])},425:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(4),s=function(){function e(){r(this,e),this.$modal=$("#download-code-modal"),this.$confirmBtn=$("#download-code-modal .confirm")}return a(e,[{key:"setup",value:function(){var e=this;return function(t){return e.$confirmBtn.off("click").on("click",function(){e.download(t)})}}},{key:"download",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.ajax({url:t,method:"get",async:!1});case 2:return n=e.sent,this.$modal.modal("hide"),"error"==n.status?i.flashMessage(n.status,n.message):"true"==localStorage.isClient?window.location.href=t:window.open(t,"_blank","toolbar=yes,location=yes,width=500,height=500"),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),c=new s;e.exports=c.setup()},426:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(95),s=n(528),c=n(529),l=n(526),u=n(527),d=$("#jinja-data").data(),f=function(){function e(){r(this,e),this.$display=$("#display"),this.$desktopToggle=$(".desktop-toggle"),this.$hideDesktop=$(".hide-desktop"),this.$showDesktop=$(".show-desktop"),this.$lab=$("#lab-container"),this.$disconnectModal=$("#disconnect-modal"),this.guacTunnel=null,this.guac=null,this.display=null,this.keyboard=null,this.reconnectTTL=3e4,this.reconnectTimer=null,this.num=0,this.timeOutCb=null,this.isRdp=d.isRdp,this.useAvocado=d.useAvocado}return a(e,[{key:"setup",value:function(e){var t=this.createTunnel(e),n=this.createClient(t),o=this.getDisplay(n);if(!d.readonly){var r=(new c(n),new s(n));new l(n,r);this.keyboard=r}this.guacTunnel=t,this.guac=n,this.display=o,this.toggleDesktop()}},{key:"connect",value:function(){function e(e,n,o){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,o){var r,a,i,s,c,l,f,h,p,m,v,g,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(n),this.$display.css("width","auto"),this.$display.html(this.display.getElement()),r={},!this.useAvocado){e.next=8;break}r="desktop"==localStorage.mode||d.isShare?{authToken:d.desktopToken}:{authToken:d.sshToken},e.next=18;break;case 8:return e.prev=8,e.next=11,$.ajax({method:"POST",url:"https://"+n+"/api/tokens",data:{token:t},timeout:2e4});case 11:r=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),this.timeOutCb&&this.timeOutCb(),e.abrupt("return",!1);case 18:return a=new u,e.next=21,a.setup();case 21:i=[],a.mimetypes.forEach(function(e){i.push("&GUAC_IMAGE="+encodeURIComponent(e))}),s=window.devicePixelRatio||1,c=Math.floor(96*s),l=$(window).width()/1024,f=$(window).height()/768,h=Math.min(l,f),p=Math.floor(1024*h),m=Math.floor(768*h),v="token="+r.authToken,this.useAvocado?v+="\n                &WIDTH="+p+"\n                &HEIGHT="+m+"\n                &DPI="+c+"\n            ":v+="\n                &GUAC_ID="+o+"\n                &GUAC_TYPE=c"+i.join("")+"\n                &GUAC_DATA_SOURCE="+r.dataSource+"\n                &GUAC_WIDTH="+p+"\n                &GUAC_HEIGHT="+m+"\n            ",d.readonly&&(v+="&read-only=true"),this.guac.connect(v.replace(/[\s]+/g,"")),clearInterval(this.reconnectTimer),this.reconnectTTL=3e4,"true"==localStorage.hasSecondVm&&(g=$(".toggle-vm").clone(),this.$display.append(g),g.show(),b=+localStorage.currentVm,g.find(".btn").removeClass("active"),b>0?$('[data-vm="'+b+'"]').addClass("active"):$('[data-vm="1"]').addClass("active"));case 37:case"end":return e.stop()}},e,this,[[8,14]])}));return e}()},{key:"setTimeOutCb",value:function(e){this.timeOutCb=e}},{key:"disconnect",value:function(){this.guac.disconnect()}},{key:"onStateChange",value:function(e){var t=this;this.guac.onstatechange=function(n){3===n&&"function"==typeof e&&(t.$desktopToggle.show(),e())}}},{key:"onError",value:function(e){var t=this,n=this.guacTunnel.oninstruction;this.guacTunnel.oninstruction=function(e,o){n(e,o),"dispose"===e&&Array.isArray(o)&&o.length&&"0"===o[0]&&t.$disconnectModal.modal("show")},this.guac.onstatechange=function(t){4!==t&&5!==t||(Raven.captureException("断开桌面了，error: statechange "+t),$.post("/api/logstash",{name:"websocket_error_"+t}),"function"==typeof e&&e())},this.guac.onerror=function(e){e.message="断开桌面了，client error: "+e.message;var t=new Error(e.message);Raven.captureException(t)},this.guacTunnel.onerror=function(n){n.message="断开桌面了，tunnel error: "+n.message;var o=new Error(n.message);Raven.captureException(o),t.reconnectTimer=setInterval(function(){if(t.reconnectTTL<=0)return clearInterval(t.reconnectTimer),!1;"function"==typeof e&&e(),t.reconnectTTL-=1e3},1e3)}}},{key:"createTunnel",value:function(e){return window.WebSocket?this.createWsTunnel(e):this.createHttpTunnel(e)}},{key:"createWsTunnel",value:function(e){var t=!0;return"http:"==window.location.protocol&&(t=!1),/mqqbrowser/g.test(navigator.userAgent.toLowerCase())&&(t=!1),/micromessenger/g.test(navigator.userAgent.toLowerCase())&&(t=!1),this.useAvocado?new i.ChainedTunnel(new i.WebSocketTunnel((t?"wss://":"ws://")+d.avocadoHost+"/websocket-tunnel")):new i.ChainedTunnel(new i.WebSocketTunnel((t?"wss://":"ws://")+e+"/websocket-tunnel"))}},{key:"createHttpTunnel",value:function(e){return new i.HTTPTunnel("https://"+e+"/tunnel",!0)}},{key:"createClient",value:function(e){return new i.Client(e)}},{key:"getDisplay",value:function(e){return e.getDisplay()}},{key:"scale",value:function(e,t){var n=[];if(n=d.imageList.indexOf(d.imageId)>-1?[1280,960]:[1024,768],/ssh/.test(e))this.display.scale(1);else{var o=$(window).width()/n[0],r=$(window).height()/n[1];this.display.scale(Math.min(o,r))}this.isRdp&&this.display.scale(1)}},{key:"toggleDesktop",value:function(){var e=this,t=this;this.$desktopToggle.find("span").on("click",function(){return t.$desktopToggle.find("span").css("display","inline-block"),$(this).hide(),!1}),this.$hideDesktop.on("click",function(){return e.$display.animate({right:-e.$display.width()}),e.$lab.animate({width:$(window).width()}),!1}),this.$showDesktop.on("click",function(){return e.$display.animate({right:0}),e.$lab.animate({width:$(window).width()-e.$display.width()}),!1})}}]),e}();e.exports=f},427:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=$("#jinja-data").data(),r=function e(){n(this,e),this.courseId=o.courseId,this.labId=o.labid,this.vmId=o.vmId,this.secondVmId=o.secondVmId};e.exports=r},428:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(83),s=$("#jinja-data").data(),c=function(){function e(){r(this,e),this.sections=[],this.sectionsReg=/(<h2[^>]*>[^>]+<\/h2>)/gi,this.sectionsLen=null,this.tops=[],this.$msg1=$(".labdoc-msg .alert.msg1"),this.$msg2=$(".labdoc-msg .alert.msg2"),this.$sections=$(".labdoc-sections"),this.$docContent=$(".labdoc-content"),this.$vipView=$(".vip-view"),this.$showImageModal=$("#show-doc-image-modal"),this.$exam=$(".lab-exam"),this.$preview=$(".labdoc-preview"),this.$display=$("#display"),this.$lab=$("#lab-container"),this.$labdoc=$("#labdoc"),this.$labNav=$(".lab-nav-container"),this.$tabsHover=$(".tabs-hover"),this.$labdocMsg=$(".labdoc-msg"),this.getDoc()}return a(e,[{key:"setup",value:function(){this.msg();navigator.userAgent.indexOf("Chrome")>-1&&(document.getElementById("praseArea").onpaste=this.pasteFuc,document.getElementById("labdoc-content").oncopy=this.addLink)}},{key:"getDoc",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,!s.isContest){e.next=8;break}this.mdoc=i($("#doc-content").val()),this.$docContent.html(this.mdoc),""!=$("#doc-content").val()&&this.$docContent.append("<div class='labdoc-copyright'>*本课程内容，由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播。</div>"),e.next=14;break;case 8:return e.next=10,$.get(s.coursesDoc);case 10:n=e.sent,this.mdoc=i(n.document),this.$docContent.html(this.mdoc),""!=n.document&&this.$docContent.append("<div class='labdoc-copyright'>*本课程内容，由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播。</div>");case 14:this.sections=this.mdoc.match(this.sectionsReg)||[],this.sectionsLen=this.sections.length,this.renderSections(),this.$vipView.show(),this.$docContent.find("pre > code").each(function(){hljs.highlightBlock(this)}),this.$docContent.find("a").attr("target","_blank"),this.$docContent.on("click","img",function(){var e=$(this).attr("src");t.$showImageModal.find("img").attr("src",e),t.$showImageModal.modal("show")}),this.exam(),$("img").on("load",function(){return o.scroll()}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),console.log(e.t0);case 28:case"end":return e.stop()}},e,this,[[1,25]])}));return e}()},{key:"pasteFuc",value:function(e){e.preventDefault();var t,n=(e.originalEvent||e).clipboardData;if(void 0===n||null===n){if(""!==(t=window.clipboardData.getData("Text")||"")){if(t.indexOf("来源: 实验楼")>0){var o=t.substring(t.indexOf("来源: 实验楼"));Data=t.replace(new RegExp(o,"g"),""),document.execCommand("insertText",!1,Data)}else document.execCommand("InsertText",!1,t);if(window.getSelection){var r=document.createElement("span");r.innerHTML=t,window.getSelection().getRangeAt(0).insertNode(r)}else document.selection.createRange().pasteHTML(t)}}else if(t=n.getData("text/plain")||"",t.indexOf("来源: 实验楼")>0){var a=t.substring(t.indexOf("来源: 实验楼"));Data=t.replace(new RegExp(a,"g"),""),document.execCommand("insertText",!1,Data)}else document.execCommand("insertText",!1,t)}},{key:"msg",value:function(){this.$msg1.on("click",".close",function(){localStorage.labdocMsg1=!1,$(".labdoc-btns").css("margin-bottom","0px")}),this.$msg2.on("click",".close",function(){localStorage.labdocMsg2=!1}),"false"!=localStorage.labdocMsg1&&(this.$msg1.show(),$(".labdoc-btns").css("margin-bottom","77px")),"false"!=localStorage.labdocMsg2&&this.$msg2.show()}},{key:"renderSections",value:function(){var e=[];e.push("<h2>"+s.labName+"</h2>"),e.push('<nav class="navbar" id="document-navbar">'),e.push('<ul class="nav navbar-nav">');for(var t=0;t<this.sectionsLen;t++)e.push("<li>"),e.push('<a class="stat-event" href="#doc-section-'+t+'" '),e.push('data-toggle="tooltip" data-stat="console_step" data-placement="top" '),e.push('data-title="'+$(this.sections[t]).text()+'">'),e.push("</a>"),e.push("</li>");e.push("</ul>"),e.push("</nav>"),this.$sections.html(e.join("")),$('[data-toggle="tooltip"]').tooltip(),$(".labdoc-content h2").each(function(e){$(this).attr("id","doc-section-"+e)}),$("#labdoc").scrollspy({target:"#document-navbar"}),this.$sections.find("li").css("width",1/this.sectionsLen*100+"%"),this.$sections.find("ul").append('<div class="sections-line"></div>'),$(".sections-line").css({position:"absolute",top:"7px",width:(this.sectionsLen-1)/this.sectionsLen*100+"%",height:1,"margin-left":.5/this.sectionsLen*100+"%",background:"#999"}),$(".navbar-nav a").on("click",function(e){e.preventDefault();var t=this.hash;$(".labdoc-preview").animate({scrollTop:$(t).offset().top},300,function(){localStorage.lastHash==t&&(window.location.hash=""),window.location.hash=t,localStorage.lastHash=t})})}},{key:"exam",value:function(){var e=[],t=s.quizzes.quiz_num,n=s.quizzes.quizzes;e.push("<h2>选择题：</h2>");for(var o=1;o<=t;o++){e.push('<div class="form-group">'),e.push("<label>"+o+". "+n[o-1].quiz_content+"</label>");for(var r=0;r<4;r++)e.push('<div class="checkbox">'),e.push("<label>"),e.push('<input type="checkbox" data-value="'+r+'">'),e.push(String.fromCharCode(65+r)+". "+n[o-1].quiz_option[r]),e.push("</label></div>");e.push('<button data-answer="['+n[o-1].quiz_answer+']"\n                    type="button" class="btn btn-success">提交</button>'),e.push('<div style="display:none; margin-top:10px;" class="alert"></div></div>')}t>0&&(this.$exam.html(e.join("")),this.$exam.on("click",".btn",function(){var e=[],t=$(this).data("answer"),n=t.map(function(e){return String.fromCharCode(e+65)});$(this).parent().find("input:checked").each(function(){e.push($(this).data("value"))}),t.join("")==e.join("")?$(this).next().removeClass("alert-success").removeClass("alert-danger").addClass("alert-success").text("回答正确！").show():$(this).next().removeClass("alert-success").removeClass("alert-danger").addClass("alert-danger").text("回答错误！正确答案是："+n.join("")).show()}))}},{key:"scroll",value:function(){var e=this,t=this;this.tops=this.sections.map(function(t,n){return e.$docContent.find("h2:eq("+n+")").offset().top-150}),this.$sections.find(".section-circle").on("click",function(){t.$sections.find(".section-circle").removeClass("active"),$(this).addClass("active");var e=$(this).data("section");t.$preview.animate({scrollTop:t.tops[e]},500)}),this.$preview.scroll(function(){for(var e=$(this).scrollTop(),n=t.tops.length-1;n>=0;n--)if(e>=t.tops[n]){t.$sections.find(".section-circle").removeClass("active"),t.$sections.find(".section-circle:eq("+n+")").addClass("active");break}})}},{key:"layout",value:function(){var e=this,t=$(window).width();this.$lab.width(t-this.$display.width()),this.$tabsHover.stop().animate({left:this.$labNav.find("li.active").offset().left},200),this.$labNav.find("li:not(li:first)").on("mouseenter",function(){e.$tabsHover.stop().animate({left:$(this).offset().left},200)}),this.$labNav.on("mouseleave",function(){e.$tabsHover.stop().animate({left:$("li.active",this).offset().left},200)}),this.$preview.height(this.$labdoc.height()-this.$labdocMsg.height-150)}},{key:"addLink",value:function(e){console.log(e.clipboardData);var t=document.body,n=void 0;n=window.getSelection();var o="\n\r来源: 实验楼\n\r链接: "+document.location.origin+"/courses/"+s.courseId+"\n\r本课程内容，由作者授权实验楼发布，未经允许，禁止转载、下载及非法传播";if(window.clipboardData){var r=n+o;return window.clipboardData.setData("text",r),!1}if(e.clipboardData){var a=n+o;return e.clipboardData.setData("text/plain",a),!1}var i=n+o,c=document.createElement("div");c.style.position="absolute",c.style.left="-99999px",t.appendChild(c),c.innerHTML=i,n.selectAllChildren(c),window.setTimeout(function(){t.removeChild(c)},0)}}]),e}(),l=new c;e.exports=l},429:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e){var t=[],n=[];e.is_container?e.owner_is_member&&(a.hasMemberVm?e.is_created_before_become_member?t.push("您的实验环境是购买会员前创建的，不支持保存，停止实验后创建新环境可以保存。"):t.push("保存的实验环境可在个人主页访问"):t.push('<i class="fa fa-exclamation-triangle"></i>保存当前实验环境，您已保存的环境将被替换'),e.is_created_before_become_member||(n.push('<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>'),n.push('<button type="button" class="btn btn-primary confirm">保存</button>'))):t.push("该实验环境不支持保存"),(!a.isMember||e.isecs||e.is_created_before_become_member)&&n.push('<button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>'),t.length&&i.find(".modal-body").html(t.join("")),i.find(".modal-footer").html(n.join(""))}function r(e,t){var r=this;e?o(t):i.on("show.bs.modal",n(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/vm/"+a.vmId);case 2:t=e.sent,n=t.vm,o(n);case 5:case"end":return e.stop()}},e,r)})))}var a=$("#jinja-data").data(),i=$("#save-vm-modal");e.exports=r},43:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\n.search-autocomplete[data-v-72bea96c] {\n  position: absolute;\n  top: 35px;\n  left: 1px;\n  width: 195px;\n  padding: 4px;\n  border: solid 1px #ddd;\n  border-top: none;\n  background: #fff;\n  z-index: 1000;\n}\n.search-autocomplete a[data-v-72bea96c] {\n    display: block;\n    padding: 6px 8px;\n    color: #4c5157;\n    font-size: 13px;\n}\n.search-autocomplete a[data-v-72bea96c]:hover, .search-autocomplete a[data-v-72bea96c]:focus {\n      color: #fff;\n      background: #0c9;\n      text-decoration: none;\n}\n",""])},430:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e){var t=[];e.owner_is_member?e.is_created_before_become_member?t.push("您的实验环境是购买会员前创建的，不支持SSH，停止实验后创建新环境可以使用SSH。"):(t.push("<p>SSH访问地址及端口："+e.host+":"+e.ssh_port+"</p>"),t.push("<p>用户名：shiyanlou 密码："+e.passwd+"</p>")):t.push("<p>用户名：shiyanlou 密码："+e.passwd+"</p>"),i.find(".alert-info").html(t.join(""))}function r(e,t){var r=this;e?o(t):i.on("show.bs.modal",n(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/vm/"+a.vmId);case 2:t=e.sent,n=t.vm,o(n);case 5:case"end":return e.stop()}},e,r)})))}var a=$("#jinja-data").data(),i=$("#ssh-modal");e.exports=r},431:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e){var t=[],n=[];e.is_container&&!a.isChallenge?e.owner_is_member&&e.is_created_before_become_member&&t.push('<p style="margin-bottom: 30px;">您的实验环境是购买会员前创建的，不支持保存，停止实验后创建新环境可以保存。</p>'):t.push('<p style="margin-bottom: 30px;">该实验环境不支持保存</p>'),(e.is_ecs||e.is_qcloud_cvm||e.is_created_before_become_member)&&(n.push('<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">取消</button>'),n.push('<button type="button" class="btn btn-sm btn-success confirm">确定</button>')),t.length&&i.find(".modal-body .vm-related-message").html(t.join("")),n.length&&(i.find(".modal-body .alert-msg-btns").html(n.join("")),i.find(".modal-body .last-saved-vm").remove())}function r(e,t){var r=this;e?o(t):i.on("show.bs.modal",n(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/vm/"+a.vmId);case 2:t=e.sent,n=t.vm,o(n);case 5:case"end":return e.stop()}},e,r)})))}var a=$("#jinja-data").data(),i=$("#stop-lab-modal");e.exports=r},432:function(e,t,n){function o(e,t){var n=[];s.hasMemberVm&&e.id==s.memberVmId?n.push('<div class="alert alert-danger">\n            实验时间已到，实验环境已被关机保存，点击确认回到课程。\n            </div>'):n.push('<div class="alert alert-danger">\n            实验时间已到，实验环境已被删除，点击确认回到课程。\n            </div>'),t&&(n.length=0,n.push('\n            <div class="alert alert-danger">\n            实验已结束，实验环境已关机退出。\n            </div>'),u.html('<a class="btn btn-primary restart" href="#">重启实验环境</a>')),l.html(n.join("")),$(document).on("click","#timeout-modal .restart",function(){return i.show(),$.post(s.stopLab,{userlab:s.userlabId}).done(function(e){setTimeout(function(){s.vmId==s.memberVmId?r(s.startLabUrl,{new_env:0}):r(s.startLabUrl)},3e3)}),!1}),c.on("show.bs.modal",function(){$("#increase-time-modal").modal("hide")})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$.post(e,t).done(function(e){e.ok?setTimeout(function(){window.location.reload()},2e3):"error"==e.status&&(i.hide(),a.flashMessage(e.status,e.message))})}var a=n(4),i=n(6),s=$("#jinja-data").data(),c=$("#timeout-modal"),l=c.find(".modal-body"),u=c.find(".modal-footer");e.exports=o},433:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e){var t=void 0;e.is_webide_enabled?(e.owner_is_member&&e.is_created_before_become_member&&(t="您的实验环境是购买会员前创建的，不支持WebIDE，停止实验后创建新环境可以使用WebIDE。"),e.owner_is_member||(t='该功能为会员功能，使用 webIDE 获得更稳定流畅的在线编程体验\n                    <p style="text-align: center">\n                        <br><br>\n                        <a class="btn btn-primary vip-without-bean" href="{{ url_for(\'frontend.member_index\') }}">查看更多会员特权</a>\n                    </p>')):t="该实验不支持WebIDE",t&&i.find(".modal-body").html(t)}function r(e,t){var r=this,s=$(".webide");if(t.is_webide_enabled&&t.owner_is_member&&!t.is_created_before_become_member)return void s.on("click",function(){return window.open(t.link.codebox_url,"_blank"),!1});e?o(t):i.on("show.bs.modal",n(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/vm/"+a.vmId);case 2:t=e.sent,n=t.vm,o(n);case 5:case"end":return e.stop()}},e,r)})))}var a=$("#jinja-data").data(),i=$("#webide-modal");e.exports=r},434:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(7),s=n(33),c=n(4),l=n(6),u=$("#jinja-data").data(),d=function(){function e(){var t=this;r(this,e),this.$report=$("#report"),this.$reportTextarea=this.$report.find("textarea"),this.$reportTabs=this.$report.find(".nav-tabs"),this.$askquestion=$("#askquestion"),this.$insertImgModal=$("#insert-img-modal"),this.$insertImgBtn=this.$insertImgModal.find(".upload-image-btn"),this.$editorPickfile=$("#mkeditor-note-pickfile"),this.$reportAutoSaveTime=$(".autosave-time"),this.$publishReportBtn=$(".publish-report-btn"),this.$publishReportModal=$("#publish-report-modal"),this.$publishSuccessModal=$("#publish-report-success-modal"),this.publishedReport=!1,this.labreportUrl="",this.autoSaveTimers=[],this.report={},this.uploadImg(),this.$reportTextarea.on("keypress",function(){t.autoSave()}),this.publish(),$('[href="#report"]').on("click",function(){setTimeout(function(){t.layout()},100)})}return a(e,[{key:"setup",value:function(e){this.captureCursor(this.$reportTextarea,e,!0),this.captureCursor(this.$askquestion,e)}},{key:"captureCursor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.on("mouseenter",function(){t&&"function"==typeof t.off&&t.off(),n&&$(this).focus()}).on("mouseleave",function(){t&&"function"==typeof t.on&&t.on(),n&&$(this).blur()})}},{key:"uploadImg",value:function(){var e=this;this.$insertImgBtn.on("click",function(){e.$insertImgModal.modal("hide"),e.$editorPickfile.click()})}},{key:"autoSave",value:function(){var e=this;this.autoSaveTimers.map(function(t){clearTimeout(t),e.autoSaveTimers.shift()});var t=setTimeout(o(regeneratorRuntime.mark(function t(){var n,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=$(".publish-report-btn"),n.length&&n.hasClass("disabled")&&n.removeClass("disabled"),o=e.$report.find("textarea").val(),o.length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,$.post(u.updateReport,{text:o});case 7:r=t.sent,e.report=r.report||{},e.$reportAutoSaveTime.text("保存于 "+e.timeFormater());case 10:case"end":return t.stop()}},t,e)})),1e3);this.autoSaveTimers.push(t)}},{key:"publish",value:function(){var e=this,t=this.$publishReportModal.find(".btn-success");this.$publishReportBtn.on("click",function(){var n=e.$reportTextarea.val();if(e.publishedReport||u.publishedReport)return n.length<100?void c.flashMessage(!1,"内容长度不能小于100，请检查后重试"):(e.$publishReportModal.find(".modal-body .btn-success").addClass("confirm"),void t.trigger("click"));var o="";if(n.length<100){if(0==n.length)return void c.flashMessage(!1,"实验报告内容不能为空，请填写内容后发布");o='<div class="save-as-private"><p>当前实验报告 <span class="character-count">'+n.length+"</span> 字，将私有保存</p>\n                        <small>(超过100字即可公开发布获得小伙伴的点评哦~)</small></div>\n                        ",e.$publishReportModal.find(".modal-body .alert-msg").html(o),e.$publishReportModal.find(".modal-body .btn-success").removeClass("confirm").addClass("private-notes"),e.$publishReportModal.modal("show")}else e.$publishReportModal.find(".modal-body .btn-success").addClass("confirm"),t.trigger("click");return!1}),t.on("click",o(regeneratorRuntime.mark(function n(){var o,r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hasClass("confirm")){n.next=12;break}return l.show(),o=e.$reportTextarea.val(),n.next=5,$.post(u.updateReport,{text:o});case 5:return n.next=7,$.post(u.publishReport);case 7:r=n.sent,l.hide(),"success"==r.status?e.publishedReport||u.publishedReport?c.flashMessage(r.status,r.message):(e.$publishSuccessModal.modal("show"),e.$publishReportBtn.html('<i class="fa fa-share"></i> 更新'),e.publishedReport=!0,e.labreportUrl=r.url,e.weiboShare(),e.wechatShare()):c.flashMessage(r.status,r.message),n.next=16;break;case 12:return a=e.$reportTextarea.val(),n.next=15,$.post(u.updateReport,{text:a});case 15:c.flashMessage(!0,"保存成功，您可以在个人主页-实验报告中找到它");case 16:case"end":return n.stop()}},n,e)})))}},{key:"layout",value:function(){this.$reportTextarea.height(this.$report.height()-this.$reportTabs.outerHeight()-this.$report.find(".btn-group").outerHeight()-21),this.$report.find(".mkeditor-viewer > div").height(this.$report.height()-this.$reportTabs.outerHeight()-23)}},{key:"timeFormater",value:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return t<10&&(t="0"+t),n<10&&(n="0"+n),t+":"+n}},{key:"weiboShare",value:function(){if($("#weibo-box").length){var e=$("#weibo-box").data(),t=[],n=this;new i({el:"#weibo-box",render:function(o){return o(s,{props:{isBtn:e.isBtn,path:"",title:e.title+"",pic:t,icon:e.icon,isLeft:e.isLeft,url:n.labreportUrl}})}})}}},{key:"wechatShare",value:function(){var e=this.labreportUrl;$(".wechat-qrcode-wrapper").qrcode({width:100,height:100,text:e})}}]),e}();e.exports=d},435:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(79),s=n(4),c=n(6),l=$("#jinja-data").data(),u=function(){function e(){r(this,e),this.qiniuBucket="https://dn-simplecloud.shiyanlou.com/",this.$modal=$("#insert-img-modal"),this.$btn=$("#insert-img-modal .screenshot-btn"),this.$textarea=$("#report textarea"),this.setup()}return a(e,[{key:"setup",value:function(){var e=this;this.$btn.on("click",o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$modal.modal("hide"),c.show(),t.next=4,e.getQiniuToken();case 4:n=t.sent,e.uploadImg(n);case 6:case"end":return t.stop()}},t,e)})))}},{key:"getQiniuToken",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post(l.qiniuTokenUrl);case 2:if(t=e.sent,"error"!=t.status){e.next=7;break}return c.hide(),s.flashMessage(t.status,t.message),e.abrupt("return",!1);case 7:return e.abrupt("return",t.token);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"uploadImg",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,o,r,a,u,d,f,h,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.Base64,o=localStorage.mode,r=$("canvas").get("ssh"===o?1:0),a=r.toDataURL("image/png").replace("data:image/png;base64,",""),u=l.userid+""+Date.now(),d=n.encode(u),f="https://upload.qiniup.com/putb64/-1/key/"+d,e.next=9,$.ajax({type:"post",url:f,headers:{"Content-Type":"multipart/form-data",Authorization:"UpToken "+t},data:a}).done(function(){console.log("success")}).fail(function(e){c.hide(),s.flashMessage("error","上传图片失败"),Raven.captureException("图片上传失败："+JSON.stringify(e))});case 9:h=e.sent,h.hash&&(p=this.qiniuBucket+u+"-wm",m="![实验楼]("+p+")",this.insertText(this.$textarea,m)),c.hide();case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"insertText",value:function(e,t){if(e instanceof jQuery&&(e=e.get(0)),e.focus(),document.selection){document.selection.creatRange().text=t}else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var n=e.selectionStart,o=e.selectionEnd,r=n,a=e.value;e.value=a.substring(0,n)+t+a.substring(o,a.length),r+=t.length,e.selectionStart=e.selectionEnd=r}else e.value+=t}}]),e}();e.exports=u},436:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(4),s=$("#jinja-data").data(),c=function(){function e(){r(this,e),this.shareUrl=window.location.origin+s.shareDesktopUrl,this.url=window.location.href,this.$modal=$("#share-desktop-modal"),this.$display=$("#display"),this.$shareDesktop=$(".share-desktop"),this.setup()}return a(e,[{key:"setup",value:function(){var e=this,t={lab_id:s.labid,readonly:1},n={lab_id:s.labid,readonly:0};this.$modal.on("show.bs.modal",function(){e.requestShareUrl(t,$("input.readonly",this)),e.requestShareUrl(n,$("input.cooperation",this))})}},{key:"requestShareUrl",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post(s.shareDesktop,t);case 2:o=e.sent,"success"==o.status?($(n).val(this.shareUrl+o.key),r=new Clipboard($(n).get(0)),r.on("success",function(e){$(n).siblings(".alert").remove();var t=$('<div class="alert alert-info">复制成功</div>');t.css("opacity",0),$(n).after(t),t.animate({opacity:1}),setTimeout(function(){$(n).siblings(".alert").animate({opacity:0},function(){$(n).siblings(".alert").remove()})},2e3),e.clearSelection()})):(this.$modal.modal("hide"),i.flashMessage(o.status,o.message));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"adjustDesktop",value:function(){this.$display.css({position:"static"}),this.$display.find("> div").css({margin:"0 auto"}),this.$shareDesktop.css({display:"block",position:"fixed",top:0,left:0,width:($(window).width()-this.$display.find("> div").width())/2,padding:"10px",color:"#fff","font-size":"14px"}),this.$shareDesktop.find("a").css({color:"#f66","font-size":"14px"}),this.$shareDesktop.find(".btn").css({color:"#fff"})}}]),e}();e.exports=c},437:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e),this._labId=function(){return localStorage.labId},this._mode=function(){return localStorage.mode},this._isNewLab=function(){return localStorage.newLab}}return o(e,[{key:"labId",get:function(){return this._labId()}},{key:"mode",get:function(){return this._mode()}},{key:"isNewLab",get:function(){return this._isNewLab()},set:function(e){localStorage.newLab=e}}]),e}();e.exports=r},438:function(e,t,n){function o(){s.isClient||s.shareDesktop||(i.init(),i.start())}var r=n(141),a=$("#jinja-data").data(),i=new Tour({backdrop:!0,steps:[{element:".lab-nav-container",title:"开始实战",content:"按照文档在环境中动手实验，记录实验报告，有问题点<strong>我要提问</strong>",placement:"bottom"},{element:"#display",title:"实验环境",content:"在Linux Web桌面完成实验任务，操作时间被记录为<strong>有效学习时间</strong>",placement:"left"},{element:"#tools",title:"工具栏",content:"实验默认一小时，到期可延时。点击可切换图形界面及字符界面",placement:"left",onShow:function(e){$("#tools").css("z-index",1101)},onShown:function(e){$("#step-2").css("top","10px"),$("#step-2 .arrow").css("top","10%")}},{element:"#tools-vmtools",title:"实验工具",content:"支持剪切板复制粘贴，共享实验桌面，下载实验代码，会员可以SSH连接和保存环境",placement:"left",onShown:function(e){$(".tour [data-role=next]").removeClass("disabled").prop("disabled",!1).text("开始实验").on("click",function(){$(".tour .close").click()})},onHide:function(e){$("#tools").css("z-index",100)}}],template:'<div class="popover tour"><div class="arrow"></div><button type="button" class="close" data-role="end"><span aria-hidden="true">&times;</span></button><h3 style="font-size:16px;" class="popover-title"></h3><div style="font-size:16px;" class="popover-content"></div><div class="popover-navigation"><button style="font-size:12px;" class="btn btn-default" data-role="prev">上一步</button><span data-role="separator"></span><button style="font-size:12px;" class="btn btn-primary" data-role="next">下一步</button></div></div>'});!a.isMember&&a.needNetwork?($("#need-network-modal").on("hidden.bs.modal",function(){o()}),setTimeout(function(){$("#need-network-modal").modal("show").off("click"),$("#need-network-modal .modal-footer .btn").on("click",function(){$("#need-network-modal").modal("hide")})},2e3)):setTimeout(function(){o()},2e3);var s=new r},439:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=$("#jinja-data").data(),r=function e(){n(this,e),this.id=o.userid,this.isMember=o.isMember,this.isSeniorMember=o.isSeniorMember,this.hasMemberVm=o.hasMemberVm,this.memberVmId=o.memberVmId};e.exports=r},44:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\n.side-new-contest .sidebox-body[data-v-7d67fa2d] {\n  overflow: hidden;\n}\n.side-new-contest .sidebox-body span[data-v-7d67fa2d] {\n    position: relative;\n    top: 4px;\n    color: #3a3a3a;\n    font-size: 14px;\n}\n.side-new-contest .sidebox-body .btn[data-v-7d67fa2d] {\n    padding: 2px 10px;\n    color: #08bf91;\n    font-size: 14px;\n    border: solid 1px #08bf91;\n}\n.side-new-contest .sidebox-body .btn[data-v-7d67fa2d]:hover, .side-new-contest .sidebox-body .btn[data-v-7d67fa2d]:focus {\n      color: #fff;\n      background: #09bf91;\n}\n",""])},440:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=(n(4),function(){function e(t){r(this,e),this.isSharePage=t,this.download_uri="",this.has_desktop=!1,this.has_second_vm=!1,this.has_ssh=!1,this.host="",this.id=null,this.is_container=!1,this.is_created_before_become_member=!1,this.is_ecs_cvm=!1,this.is_qcloud=!1,this.is_rdp=!1,this.is_webide_enabled=!1,this.is_windows=!1,this.link={},this.owner_is_member=!1,this.passwd="",this.ssh_port=null,this.ttl=null,this.$failedModal=$("#desktop-connect-failed")}return a(e,[{key:"getVm",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.removeItem("virtualMachine"),!this.isSharePage){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,$.get("/vm/"+t);case 6:n=e.sent,o=n.vm;for(r in o)this[r]=o[r];o.has_second_vm?localStorage.hasSecondVm=!0:localStorage.hasSecondVm=!1,e.next=20;break;case 12:e.prev=12,e.t0=e.catch(3),localStorage.virtualMachine=!0,this.$failedModal.find(".modal-title").html("虚拟机连接失败"),this.$failedModal.find(".alert-danger").html('抱歉，虚拟机连接失败，请 <a href="javascript:window.location.reload()">刷新页面</a> 重试，或者\n                <a href="javascript:;" class="stopLabBtn">停止实验</a>\n                '),this.$failedModal.find(".modal-footer").html('<button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>'),this.$failedModal.modal("show"),console.error("连接虚拟机失败：",e.t0);case 20:case"end":return e.stop()}},e,this,[[3,12]])}));return e}()}]),e}());e.exports=i},441:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=(n(4),$("#jinja-data").data(),function(){function e(t,n,r){o(this,e),this.$modes=$(".vm-modes"),this.modesArray=["desktop","ssh"],this.modesObj={},this.connectStr=null,this.currentMode=function(){return n?r:""}(),this.setup(t)}return r(e,[{key:"setup",value:function(e){this.modesObj=this.getModes(e);var t=this.renderModes(this.modesObj.firstVm);if(this.$modes.html(t),-1===this.modesArray.indexOf(this.currentMode)){var n=this.modesObj.firstVm.desktop&&this.modesArray[0]||this.modesObj.firstVm.ssh&&this.modesArray[1];this.setCurrentMode(n)}this.activeCurrentMode()}},{key:"toggleMode",value:function(e){var t=this;this.$modes.on("click",".btn",function(){var n=$(this).data("mode");t.setCurrentMode(n),t.activeCurrentMode(),"function"==typeof e&&e()})}},{key:"setCurrentMode",value:function(e){this.currentMode=e,localStorage.mode=e}},{key:"activeCurrentMode",value:function(){this.$modes.find(".btn").removeClass("active"),this.$modes.find('[data-mode="'+this.currentMode+'"]').addClass("active")}},{key:"getConnectStr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";try{e?this.modesObj.secondVm[this.currentMode].mode&&(t=this.modesObj.secondVm[this.currentMode].mode):this.modesObj.firstVm[this.currentMode].mode&&(t=this.modesObj.firstVm[this.currentMode].mode)}catch(e){console.log("error")}return t}},{key:"getModes",value:function(e){var t=e.link,n={firstVm:{}};if(e.has_desktop&&(n.firstVm.desktop={mode:t.desktop_uri,desc:"图形界面"}),e.has_ssh&&(n.firstVm.ssh={mode:t.ssh_uri,desc:"字符界面"}),e&&e.has_second_vm){var o=e.second_vm,r=e.second_vm.link;n.secondVm={},o.has_desktop&&(n.secondVm.desktop={mode:r.desktop_uri,desc:"图形界面"}),o.has_ssh&&(n.secondVm.ssh={mode:r.ssh_uri,desc:"字符界面"})}return n}},{key:"renderModes",value:function(e){var t=[];for(var n in e)t.push('\n                <a data-stat="conosle_mode" data-mode="'+n+'" class="btn stat-event">\n                    <i class="fa fa='+this.getFontClassName(n)+'"></i> '+e[n].desc+"\n                </a>\n            ");return t.join("")}},{key:"getFontClassName",value:function(e){return/desktop/g.test(e)?"desktop":"terminal"}}]),e}());e.exports=a},442:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(8),i=n(143),s=function(){function e(){o(this,e),this.socket=a,this.$display=$("#display"),this.$timeoutModal=$("#timeout-modal"),this.$increaseTimeModal=$("#increase-time-modal")}return r(e,[{key:"retryCreate",value:function(e){var t=this;this.socket.on("event:vm:retry_create",function(){i.show(t.$display),i.showMsg(!0),"function"==typeof e&&e(),i.hide()})}},{key:"labStoped",value:function(){var e=this;this.socket.on("event:lab:stoped",function(){e.$timeoutModal.find(".modal-body").html('\n                <div class="alert alert-danger">\n                实验已经停止，点击确认回到课程。\n                </div>'),e.$increaseTimeModal.modal("hide"),"block"!=$(".showTimeOut").css("display")&&"true"!=localStorage.getItem("nextLab")&&"true"!=localStorage.getItem("virtualMachine")&&(localStorage.timeOut=!0,e.$timeoutModal.modal("show"))})}},{key:"increaseTTL",value:function(e){this.socket.on("event:userlab:increase_ttl",function(t){if("true"!=localStorage.addTimeManual){var n=JSON.parse(t);"function"==typeof e&&e(n.userlab.ttl)}})}},{key:"newMsg",value:function(e){this.socket.on("event:user:new_question_or_labreport",function(t){if("function"==typeof e){var n=JSON.parse(t);e(n)}})}},{key:"submissionResult",value:function(e){this.socket.on("event:challenge_done",function(t){if("function"==typeof e){var n=JSON.parse(t);e(n)}})}},{key:"confusedVm",value:function(e){this.socket.on("event:vm:exit",function(){"function"==typeof e&&e()})}}]),e}();e.exports=s},45:function(e,t,n){t=e.exports=n(1)(),t.push([e.i,"\na[data-v-9b3c8994] {\n    display: inline-block;\n}\n.fa[data-v-9b3c8994] {\n    padding: 4px;\n    color: #274a59;\n    background: #fff;\n    font-size: 14px;\n    border-radius: 4px;\n}\n.fa[data-v-9b3c8994]:hover {\n    color: #ec5353;\n}\n.pull-left[data-v-9b3c8994] {\n    margin-left: 10px;\n}\n","",{version:3,sources:["/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/weibo.vue?ddc63646"],names:[],mappings:";AAkCA;IACA,sBAAA;CACA;AACA;IACA,aAAA;IACA,eAAA;IACA,iBAAA;IACA,gBAAA;IACA,mBAAA;CACA;AACA;IACA,eAAA;CACA;AACA;IACA,kBAAA;CACA",file:"weibo.vue",sourcesContent:["<template>\n<a :href=\"href\" :class=\"{ 'btn btn-primary': isBtn , 'pull-left': isLeft}\" target=\"_blank\">\n    <span v-if=\"isBtn\">分享到微博</span>\n    <img :src=\"icon\" alt=\"\">\n</a>\n</template>\n\n<script>\nexport default {\n    props: ['isBtn', 'path', 'title', 'pic', 'icon', 'isLeft', 'url'],\n    data() {\n        return {\n            href: '',\n            params: {\n                title: this.title,\n                appkey: '1343713053',\n                pic: (this.pic && this.pic.length) ? this.pic : ['https://static.shiyanlou.com/img/logo-base.png'],\n                searchPic: false,\n                url: this.url\n            },\n            weiboUrl: this.url ? `http://service.weibo.com/share/share.php?url=${this.url} `: `http://service.weibo.com/share/share.php?url=https://www.shiyanlou.com`,\n        };\n    },\n    mounted() {\n        this.href = `${this.weiboUrl}${this.path}`\n            + `&title=${encodeURIComponent(this.params.title)}`\n            + `&appkey=${this.params.appkey}`\n            + `&pic=${this.params.pic.join('||')}`\n            + `&searchPic=${this.params.searchPic}`;\n    }\n}\n<\/script>\n\n<style scoped>\na {\n    display: inline-block;\n}\n.fa {\n    padding: 4px;\n    color: #274a59;\n    background: #fff;\n    font-size: 14px;\n    border-radius: 4px;\n}\n.fa:hover {\n    color: #ec5353;\n}\n.pull-left {\n    margin-left: 10px;\n}\n</style>\n\n"],sourceRoot:""}])},46:function(e,t,n){var o=n(42);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},47:function(e,t,n){var o=n(43);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},48:function(e,t,n){var o=n(44);"string"==typeof o&&(o=[[e.i,o,""]]);n(3)(o,{});o.locals&&(e.exports=o.locals)},49:function(e,t,n){n(58);var o=n(0)(n(36),n(53),"data-v-72bea96c",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/search.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] search.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},50:function(e,t,n){n(59);var o=n(0)(n(37),n(54),"data-v-7d67fa2d",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/sideNewContest.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] sideNewContest.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},51:function(e,t,n){n(57);var o=n(0)(n(38),n(52),"data-v-68b3bbad",null);o.options.__file="/home/shiyanlou/shiyanlou/simplecloud/app/src/base/components/signEmail.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] signEmail.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},52:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group"},[e._m(0),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"form-control",attrs:{name:"email",autocomplete:"off",placeholder:"请输入邮箱"},domProps:{value:e.input},on:{keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key))return null;e.upEvent(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key))return null;e.downEvent(t)}],keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault(),e.selectEmail(t)},blur:e.selectEmail,input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),e.show?n("ul",e._l(e.emails,function(t,o){return n("li",{class:{active:e.active==o},on:{click:e.selectEmail,mouseenter:function(t){e.onMouseenter(o)}}},[e._v(e._s(e.input)+e._s(t))])})):e._e()])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group-addon"},[n("i",{staticClass:"fa fa-envelope",staticStyle:{margin:"0"}})])}]},e.exports.render._withStripped=!0},525:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(9),n(77);var i=n(435),s=n(427),c=n(439),l=n(440),u=n(141),d=n(437),f=n(426),h=n(441),p=n(108),m=n(434),v=n(442),g=n(110),b=n(436),w=n(431),y=n(430),x=n(429),k=n(432),_=n(433),A=n(425),C=n(428),M=(n(109),n(438),n(143)),S=n(142),T=(n(4),$("#jinja-data").data()),I=function(){function e(){r(this,e),this.userInfo=new c,this.labInfo=new s,this.terminal=new u,this.store=new d,this.report=new m,this.vm=new l(this.terminal.isSharePage),this.guacamole=null,this.vmMode=null,this.reconnectNum=0,this.$conFailedModal=$("#desktop-connect-failed"),new i,new g,new b,C.setup()}return a(e,[{key:"setup",value:function(e){this.viewPopover(),$(".question-service-btn").on("click",function(){T.isSeniorMember?$(".btn-askquestion").click():$("#service-modal").modal("show")}),function(){"stoplab"==window.location.search.substring(1)&&$(".stop-lab-btn").click()}(),$(".challenge-submit .btn").on("click",function(){$(".submit-challenge-btn").click()}),T.isChallenge&&$(function(){var e=140+($(".labdoc-msg").length?80:0);$(".labdoc-preview").css("height","calc(100% - "+e+"px)")}),$(".submit-challenge-btn").on("click",function(){function e(){var e={};e="true"==localStorage.submissionStatus?{status:"pass"}:{status:"fail",errorInfo:localStorage.submissionError},e.cheating=localStorage.cheating,"pass"==e.status?("true"===e.cheating?$("#submit-result-modal").find(".modal-body").html('\n                            <h1 class="result-status status-pass">\n                            <i class="fa fa-check-circle" aria-hidden="true"></i>\n                            PASS</h1>\n                            <span class="result-info info-pass">\n                            <strong>您的提交操作系统检测异常，成绩将增加 60 分钟罚时。如有疑问，欢迎到讨论区反馈</strong>\n                            </span>\n                        '):$("#submit-result-modal").find(".modal-body").html('\n                            <h1 class="result-status status-pass">\n                            <i class="fa fa-check-circle" aria-hidden="true"></i>\n                            PASS</h1>\n                            <span class="result-info info-pass">\n                            <strong>恭喜您，挑战成功！</strong>\n                            </span>\n                        '),T.isCollected?$("#submit-result-modal").find(".modal-footer").html('\n                            <button class="btn btn-success" type="button" data-dismiss="modal">返回挑战</button>\n                            <a href="#stop-lab-modal" class="stop-lab btn btn-danger" data-toggle="modal">停止实验</a>\n                            <a href="'+T.answer+'" class="challenge-answer-btn" target="_blank">查看答案</a>\n                        '):$("#submit-result-modal").find(".modal-footer").html('\n                            <button class="btn btn-success" type="button" data-dismiss="modal">返回挑战</button>\n                            <a href="#stop-lab-modal" class="stop-lab btn btn-danger" data-toggle="modal">停止实验</a>\n                        ')):($("#submit-result-modal").find(".modal-body").html('\n                        <h1 class="result-status status-fail">\n                        <i class="fa fa-exclamation-circle" aria-hidden="true"></i>\n                        FAIL</h1>\n                        <span class="result-info info-fail">\n                        <strong>挑战实验测试失败</strong>\n                        </span>\n                        <span class="result-info info-fail-details">\n                        <strong>失败原因：'+e.errorInfo+"</strong>\n                        </span>\n                    "),T.isCollected,$("#submit-result-modal").find(".modal-footer").html('\n                            <button class="btn btn-danger" tddype="button" data-dismiss="modal">再次尝试</button>\n                        ')),localStorage.submissionStatus="",localStorage.submissionError=""}var t=this,n=$(this).data("url"),r=$(this).data("contestId");localStorage.submissionID="",$.post(n,{contest_id:r}).fail(function(){localStorage.submissionStatus=!1,localStorage.submissionError="后台服务出错，请稍后重试。"}).done(function(e){localStorage.submissionID=e.submission_id}),$("#submit-result-modal").modal("show"),$("#submit-result-modal .modal-body").html('\n                <h1 class="progress-info">结果检测中...</h1>\n                <div class="progress">\n                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div>\n                </div>\n                <h4>后台正在对实验结果进行测试，请稍候...</h4>\n            '),$("#submit-result-modal .modal-footer").empty();var a=0,i=!1,s=void 0,c=void 0;c=setTimeout(function(){clearInterval(s),i=!0,$("#submit-result-modal").find(".modal-body").html('\n                    <h1 class="result-status status-fail">\n                    <i class="fa fa-exclamation-circle" aria-hidden="true"></i>\n                    TimeOut</h1>\n                    <span class="result-info info-fail-details">\n                    <strong>提交结果检测超时，请稍后重试</strong>\n                    </span>\n                '),$("#submit-result-modal").find(".modal-footer").html('<button class="btn btn-default" type="button" data-dismiss="modal">确定</button>')},4e4),s=setInterval(o(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a>=100&&(a=100),a+=Math.floor(9*Math.random()+1),$(".progress .progress-bar").css("width",a+"%"),!(a<10)){t.next=5;break}return t.abrupt("return",!1);case 5:return o=void 0,t.prev=6,t.next=9,$.get("/api/submissions/"+localStorage.submissionID);case 9:o=t.sent,t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(6),t.abrupt("return",!1);case 15:if(!o.challenge||"done"==o.status){t.next=19;break}return t.abrupt("return",!1);case 19:if(clearInterval(s),!i){t.next=22;break}return t.abrupt("return");case 22:clearTimeout(c),0==o.ok?(localStorage.submissionStatus=!1,localStorage.submissionError=o.err):(localStorage.submissionStatus=o.passed,localStorage.cheating=o.cheating,localStorage.submissionError=o.result.custom_err||o.result.std_err),e();case 25:case"end":return t.stop()}},n,t,[[6,12]])})),2e3)}),this.terminal.isClient?($(".faq-btn").hide(),$(".lefttime").add(".vm-mode-select > .btn").add(".clipboard-btn").add(".download-code-btn").add(".share-desktop-btn").css("display","block"),$("#lab-console").css({"text-align":"center"}),$("#display").css({display:"inline-block",position:"static"})):this.terminal.isSharePage||($(".stop-lab-btn").add(".submit-challenge-btn").add(".next-lab-btn").add(".vm-mode-select > .btn").add(".clipboard-btn").add(".share-desktop-btn").add(".fullscreen-btn").add(".question-service-btn").add("#lab-container").css("display","block"),e.is_container&&$(".download-code-btn").add(".webide").add(".ssh-btn").add(".save-vm-btn").add(".client-btn").css("display","block"),!e.is_windows&&!e.is_rdp||e.use_avocado||$(".share-desktop-btn").css("display","none"),e.show_webide?$("#tools .webide").css("display","block"):$("#tools .webide").css("display","none"))}},{key:"renderVm",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,o,r,a,i,s,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"true"===this.store.isNewLab&&(this.store.isNewLab=!1,M.show($("#display"))),e.next=3,this.vm.getVm(this.labInfo.vmId,this.terminal.isSharePage);case 3:x(this.userInfo.isMember,this.vm),y(this.userInfo.isMember,this.vm),w(this.userInfo.isMember,this.vm),_(this.userInfo.isMember,this.vm),k(this.vm,this.terminal.isClient),A(this.vm.download_uri),this.vm.is_webide_enabled&&$(".webide").attr("href",this.vm.link.codebox_url),t=!1,this.labInfo.labId==this.store.labId?t=!0:localStorage.labId=this.labInfo.labId,this.guacamole=new f,this.guacamole.setTimeOutCb(function(){c.reconnect()}),this.vmMode=new h(this.vm,t,this.store.mode),disconnectGuacamole=function(){var e=c;$("#timeout-modal").on("show.bs.modal",function(t){e.guacamole.disconnect()})},disconnectGuacamole(),this.terminal.isSharePage?(this.currentMode="",this.guacamole.connect(T.linkUri,T.linkHost,this.labInfo.vmId),this.guacamole.keyboard&&this.guacamole.keyboard.clearUserInterval()):(this.connectStr=this.vmMode.getConnectStr(),"true"==localStorage.hasSecondVm&&"2"==localStorage.currentVm?(n=this.vmMode.getConnectStr(!0),o=this.vm.second_vm.link.host,r=this.labInfo.secondVmId,this.guacamole.connect(n,o,r)):this.guacamole.connect(this.connectStr,this.vm.link.host,this.labInfo.vmId)),this.guacamole.onError(function(){c.reconnectNum<=3&&c.reconnect()}),this.guacamole.onStateChange(function(){setTimeout(function(){if(M.hide(),c.render(),c.terminal.isSharePage){(new b).adjustDesktop()}c.terminal.isClient&&c.terminal.vmTips&&$("#vm-tips").modal("show")},1e3)}),this.terminal.isSharePage||(a=new p,a.setup(this.vm.ttl,function(){c.guacamole.keyboard.clearUserInterval()})),this.vmMode.toggleMode(function(){if("true"==localStorage.hasSecondVm)if("2"==localStorage.currentVm){var e=c.vmMode.getConnectStr(!0),t=c.vm.second_vm.link.host,n=c.labInfo.secondVmId;c.connect(e,t,n)}else c.connect();else c.connect()}),this.setup(this.vm),i=new v,i.labStoped(),i.increaseTTL(function(e){leftTime.refresh(e,function(){c.guacamole.keyboard.clearUserInterval()})}),i.retryCreate(function(){c.reconnect()}),i.newMsg(function(e){c.userInfo.id!=e.user_id&&S.addLabMsg(e)}),i.confusedVm(function(){c.guacamole.disconnect(),$("#confused-vm-modal").modal("show")}),s=void 0,$(window).on("resize",function(){clearTimeout(s),s=setTimeout(function(){T.isRdp?c.reconnect():c.render()},1e3)});case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"toggleVm",value:function(){var e=this,t=$('.webide, [href="#share-desktop-modal"], [href="#ssh-modal"], [href="#save-vm-modal"], .client-btn');"true"==localStorage.hasSecondVm&&"2"==localStorage.currentVm&&setTimeout(function(){t.hide()}),$("body").on("click",".toggle-vm .btn",function(){var n=$(this).data("vm");if(localStorage.currentVm=n,1==n)t.show(),A(e.vm.download_uri),e.reconnect();else{t.hide(),A(e.vm.second_vm.download_uri);var o=e.vmMode.getConnectStr(!0),r=e.vm.second_vm.link.host,a=e.labInfo.secondVmId;e.reconnect(o,r,a)}})}},{key:"reconnect",value:function(e,t,n){var o=this;if(this.reconnectNum+=1,this.reconnectNum>3)return this.terminal.isSharePage?(this.$conFailedModal.attr("data-backdrop","static"),this.$conFailedModal.find(".modal-title").html("共享桌面连接失败"),this.$conFailedModal.find(".alert-danger").html("当前共享桌面链接已失效，请重新获取！"),this.$conFailedModal.find(".modal-footer").html(' <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button><a type="button" class="btn btn-primary" href="/">回到实验楼</a>'),void this.$conFailedModal.modal("show")):("true"!=localStorage.getItem("virtualMachine")&&"true"!=localStorage.getItem("timeOut")&&(this.$conFailedModal.find(".modal-title").html("桌面连接失败"),this.$conFailedModal.find(".alert-danger").html("抱歉，当前实验环境连接桌面失败，您可以选择停止实验或继续重连！"),this.$conFailedModal.find(".modal-footer").html('<button type="button" class="btn btn-danger stop-labs-btn">停止实验</button> <button type="button" class="btn btn-primary close-modal-btn">重连</button>'),$(".stop-labs-btn").css("background","#ff5c5d"),this.$conFailedModal.modal("show")),void this.reconnectBtn());e&&t&&n||(e=this.vmMode.getConnectStr(),t=this.vm.link.host,n=this.labInfo.vmId);var r=void 0;this.guacamole.disconnect(),this.guacamole.guac=null,this.guacamole.display=null,this.guacamole.keyboard=null,this.guacamole.connect(e,t,n),this.guacamole.onStateChange(function(){clearTimeout(r),r=setTimeout(function(){o.render()},100)})}},{key:"connect",value:function(e,t,n){var o=this;e&&t&&n||(e=this.vmMode.getConnectStr(),t=this.vm.link.host,n=this.labInfo.vmId);var r=void 0;this.guacamole.disconnect(),this.guacamole.guac=null,this.guacamole.display=null,this.guacamole.keyboard=null,this.guacamole.connect(e,t,n),this.guacamole.onStateChange(function(){clearTimeout(r),r=setTimeout(function(){o.render()},100)})}},{key:"render",value:function(){this.guacamole.scale(this.vmMode.currentMode,this.vm.is_rdp),C.layout(),this.report.setup(this.guacamole.keyboard)}},{key:"viewPopover",value:function(){$(".save-methods").popover().on("mouseenter",function(){var e=$(this);$(this).popover("show"),$(".popover").on("mouseleave",function(){e.popover("hide")})}).on("mouseleave",function(){var e=$(this);setTimeout(function(){$(".popover:hover").length||e.popover("hide")},100)})}},{key:"reconnectBtn",value:function(){var e=this;$(".stop-labs-btn").on("click",function(){e.$conFailedModal.modal("hide"),$("#stop-lab-modal").modal("show")}),$(".close-modal-btn").on("click",function(){e.reconnectNum=0,e.$conFailedModal.modal("hide"),$(".modal-backdrop").length&&$(".modal-backdrop").remove(),setTimeout(function(){e.reconnect()},1e3)})}}]),e}(),R=new I;R.renderVm(),R.toggleVm()},526:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(95),i=n(4),s=function(){function e(t,n){o(this,e),this.client=t,this.keyboard=n,this.$modal=$("#clipboard-modal"),this.$input=$("#clipboard-modal textarea"),this.$btn=$("#clipboard-modal .clipboard-copy-btn"),this.setup()}return r(e,[{key:"setup",value:function(){this.onClipboard(),this.inputCtrl()}},{key:"onClipboard",value:function(){var e=this;this.client.onclipboard=function(t,n){if("text/plain"!==n)return void t.sendAck("只支持 text/plain",a.Status.Code.UNSUPPORTED);var o=new a.StringReader(t),r="";o.ontext=function(e){r+=e,t.sendAck("获取剪切板成功",a.Status.Code.SUCCESS)},o.onend=function(){e.$input.val(r)}}}},{key:"inputCtrl",value:function(){var e=this;this.$btn.on("click",function(){var t=e.$input.val(),n=e.client.createClipboardStream("text/plain"),o=new a.StringWriter(n);o.sendText(t),o.sendEnd(),e.$modal.modal("hide"),i.flashMessage("success","保存成功，请在实验环境中粘贴内容")}),this.$modal.on("show.bs.modal",function(){e.keyboard.off()}),this.$modal.on("hidden.bs.modal",function(){e.keyboard.on()})}}]),e}();e.exports=s},527:function(e,t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),this.images=new Map([["image/jpeg","/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAABAAEDAREAAhEBAxEB/8QAFAABAAAAAAAAAAAAAAAAAAAACf/EABQQAQAAAAAAAAAAAAAAAAAAAAD/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AVMH/2Q=="],["image/png","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg=="],["image/webp","UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="]]),this.mimetypes=[]}return a(e,[{key:"setup",value:function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){var t,n,o,a,i,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=!0,o=!1,a=void 0,e.prev=4,i=this.images[Symbol.iterator]();!(n=(s=i.next()).done);n=!0)c=r(s.value,2),l=c[0],u=c[1],t.push(this.testMimeType(l,u));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),o=!0,a=e.t0;case 12:e.prev=12,e.prev=13,!n&&i.return&&i.return();case 15:if(e.prev=15,!o){e.next=18;break}throw a;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(t);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}));return e}()},{key:"testMimeType",value:function(e,t){var n=this,o="data:"+e+";base64,"+t,r=new Image;return r.src=o,new Promise(function(t,o){r.onload=r.onerror=function(){1===r.width&&1===r.height&&(n.mimetypes.push(e),t(!0)),t(!1)}})}}]),e}();e.exports=i},528:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(95),s=n(142),c=$("#jinja-data").data(),l=function(){function e(t){r(this,e),this.keyboard=new i.Keyboard(document),this.client=t,this.userInput=[],this.ttl=180,this.timer=null,this.setup()}return a(e,[{key:"setup",value:function(){var e=this;this.on(),this.timer=this.dealUserInput(),window.onblur=function(){e.keyboard.reset()}}},{key:"dealUserInput",value:function(){var e=this;return setInterval(o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.userInput.length){t.next=6;break}return t.next=3,$.post(c.studyTime,{count:e.userInput.length,data:e.userInput.join(",")});case 3:n=t.sent,"True"!==n.modal&&!0!==n.modal||s.addLevelMsg(n.level),e.userInput.length=0;case 6:case"end":return t.stop()}},t,e)})),1e3*this.ttl)}},{key:"clearUserInterval",value:function(){clearInterval(this.timer)}},{key:"on",value:function(){this.keyboard.onkeydown=this.keydownEvent.bind(this),this.keyboard.onkeyup=this.keyupEvent.bind(this)}},{key:"off",value:function(){this.keyboard.onkeydown=null,this.keyboard.onkeyup=function(){return!1}}},{key:"keydownEvent",value:function(e){this.client.sendKeyEvent(1,e)}},{key:"keyupEvent",value:function(e){this.userInput.push(1),this.client.sendKeyEvent(0,e)}}]),e}();e.exports=l},529:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(95),i=function(){function e(t){o(this,e),this.client=t,this.display=t.getDisplay(),this.mouse=new a.Mouse(this.display.getElement()),this.setup()}return r(e,[{key:"setup",value:function(){var e=this;this.mouse.onmousedown=this.mouse.onmouseup=this.mouse.onmousemove=function(t){e.display.showCursor(!1),e.sendScaledMouseState(t)}}},{key:"sendScaledMouseState",value:function(e){var t=new a.Mouse.State(e.x/this.display.getScale(),e.y/this.display.getScale(),e.left,e.middle,e.right,e.up,e.down);this.client.sendMouseState(t)}}]),e}();e.exports=i},53:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-form navbar-right",attrs:{role:"search"}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{name:"search"},on:{click:e.submit}},[n("i",{staticClass:"fa fa-search"})]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",name:"search",autocomplete:"off",placeholder:"搜索 课程/问答"},domProps:{value:e.keyword},on:{keyup:[e.search,function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submit(t)}],input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),e._v(" "),e.items.length?n("div",{staticClass:"search-autocomplete",on:{mouseleave:function(t){e.items=[]}}},e._l(e.items,function(t){return n("a",{attrs:{href:"/search?search="+encodeURIComponent(t)}},[e._v(e._s(t))])})):e._e()])])},staticRenderFns:[]},e.exports.render._withStripped=!0},54:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebox side-new-contest"},[e._m(0),e._v(" "),n("div",{staticClass:"sidebox-body"},[n("span",[e._v(e._s(e.contest.name))]),e._v(" "),e.contest.url?n("a",{staticClass:"pull-right btn",attrs:{href:e.contest.url}},[e._v("进入比赛")]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebox-header"},[n("h4",{staticClass:"sidebox-title"},[e._v("最新比赛")])])}]},e.exports.render._withStripped=!0},55:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{class:{"btn btn-primary":e.isBtn,"pull-left":e.isLeft},attrs:{href:e.href,target:"_blank"}},[e.isBtn?n("span",[e._v("分享到微博")]):e._e(),e._v(" "),n("img",{attrs:{src:e.icon,alt:""}})])},staticRenderFns:[]},e.exports.render._withStripped=!0},56:function(e,t,n){var o=n(45);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("31e620a8",o,!1)},57:function(e,t,n){var o=n(46);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("2162baad",o,!1)},58:function(e,t,n){var o=n(47);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("1de70153",o,!1)},59:function(e,t,n){var o=n(48);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(2)("564e01d0",o,!1)},6:function(e,t){function n(e,t){if(e&&s.css({top:e.offset().top,left:e.offset().left,width:e.width(),height:e.height()}),t){var n=$("<div>"+t+"</div>");n.css({"margin-top":"10px",color:"#fff","font-size":"15px","text-align":"center"}),s.append(n)}s.show()}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?($("body").addClass("open-overflow-hide"),c.show(),t&&r()):(l.removeClass("open-overflow-hide"),l.removeAttr("style"),c.hide(),r(!1),a(!1))}function r(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0,n=10;u.css({width:0}),d&&clearInterval(d),e&&(d=setInterval(function(){var e=Math.floor(Math.random()*n.toFixed(1))+1;t+=e,n-=.2,n<5&&(n=5),t>75&&(n=2,t>100&&(t=100,clearInterval(d),a(!0))),u.css({width:t+"%"})},500))}function a(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];$reload=$(".progress-reload"),e?$reload.css({opacity:1}):$reload.css({opacity:0})}function i(){s.css({top:0,left:0,width:"auto",height:"auto"}),s.hide()}var s=$('<div class="showTimeOut"><i class="fa fa-spinner fa-pulse"></i></div>'),c=$(".new-loading"),l=$("body"),u=$(".load-progress-bar"),d=0;l.append(s),s.css({display:"none",position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)","text-align":"center","z-index":1600}),s.find(".fa").css({"margin-top":.4*$(window).height(),color:"#fff","font-size":"35px"}),$(window).on("resize",function(){s.find(".fa").css({"margin-top":.4*$(window).height()})}),e.exports={show:n,hide:i,showLoad:o,showProgress:r}},60:function(e,t){function n(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function o(e,t,n){}function r(e,t,n){}function a(e,t){return i.test(t)?"":t}var i=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=o,t.onIgnoreAttr=r,t.safeAttrValue=a},61:function(e,t){e.exports={indexOf:function(e,t){var n,o;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var o,r;if(Array.prototype.forEach)return e.forEach(t,n);for(o=0,r=e.length;o<r;o++)t.call(n,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},62:function(e,t,n){function o(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function r(e,t,n){}function a(e,t,n){}function i(e,t,n){}function s(e,t,n){}function c(e){return e.replace(A,"&lt;").replace(C,"&gt;")}function l(e,t,n,o){if(n=m(n),"href"===t||"src"===t){if("#"===(n=$.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(j.lastIndex=0,j.test(n))return""}else if("style"===t){if(E.lastIndex=0,E.test(n))return"";if(L.lastIndex=0,L.test(n)&&(j.lastIndex=0,j.test(n)))return"";!1!==o&&(o=o||_,n=o.process(n))}return n=v(n)}function u(e){return e.replace(M,"&quot;")}function d(e){return e.replace(S,'"')}function f(e){return e.replace(T,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function h(e){return e.replace(I,":").replace(R," ")}function p(e){for(var t="",n=0,o=e.length;n<o;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return $.trim(t)}function m(e){return e=d(e),e=f(e),e=h(e),e=p(e)}function v(e){return e=u(e),e=c(e)}function g(){return""}function b(e,t){function n(t){return!!o||-1!==$.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var o=!Array.isArray(e),r=[],a=!1;return{onIgnoreTag:function(e,o,i){if(n(e)){if(i.isClosing){var s="[/removed]",c=i.position+s.length;return r.push([!1!==a?a:i.position,c]),a=!1,s}return a||(a=i.position),"[removed]"}return t(e,o,i)},remove:function(e){var t="",n=0;return $.forEach(r,function(o){t+=e.slice(n,o[0]),n=o[1]}),t+=e.slice(n)}}}function w(e){return e.replace(P,"")}function y(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}),t.join("")}var x=n(34).FilterCSS,k=n(34).getDefaultWhiteList,$=n(35),_=new x,A=/</g,C=/>/g,M=/"/g,S=/&quot;/g,T=/&#([a-zA-Z0-9]*);?/gim,I=/&colon;?/gim,R=/&newline;?/gim,j=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,E=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,L=/u\s*r\s*l\s*\(.*/gi,P=/<!--[\s\S]*?-->/g;t.whiteList=o(),t.getDefaultWhiteList=o,t.onTag=r,t.onIgnoreTag=a,t.onTagAttr=i,t.onIgnoreTagAttr=s,t.safeAttrValue=l,t.escapeHtml=c,t.escapeQuote=u,t.unescapeQuote=d,t.escapeHtmlEntities=f,t.escapeDangerHtml5Entities=h,t.clearNonPrintableCharacter=p,t.friendlyAttrValue=m,t.escapeAttrValue=v,t.onIgnoreTagStripAll=g,t.StripTagBody=b,t.stripCommentTag=w,t.stripBlankChar=y,t.cssFilter=_,t.getDefaultCSSWhiteList=k},63:function(e,t,n){function o(e){var t=d.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else var n=e.slice(1,t+1);return n=d.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function r(e){return"</"===e.slice(0,2)}function a(e,t,n){"user strict";var a="",i=0,s=!1,c=!1,l=0,u=e.length,d="",f="";for(l=0;l<u;l++){var h=e.charAt(l);if(!1===s){if("<"===h){s=l;continue}}else if(!1===c){if("<"===h){a+=n(e.slice(i,l)),s=l,i=l;continue}if(">"===h){a+=n(e.slice(i,s)),f=e.slice(s,l+1),d=o(f),a+=t(s,a.length,d,f,r(f)),i=l+1,s=!1;continue}if(('"'===h||"'"===h)&&"="===e.charAt(l-1)){c=h;continue}}else if(h===c){c=!1;continue}}return i<e.length&&(a+=n(e.substr(i))),a}function i(e,t){"user strict";function n(e,n){if(e=d.trim(e),e=e.replace(f,"").toLowerCase(),!(e.length<1)){var o=t(e,n||"");o&&r.push(o)}}for(var o=0,r=[],a=!1,i=e.length,l=0;l<i;l++){var h,p,m=e.charAt(l);if(!1!==a||"="!==m)if(!1===a||l!==o||'"'!==m&&"'"!==m||"="!==e.charAt(l-1))if(/\s|\n|\t/.test(m)){if(e=e.replace(/\s|\n|\t/g," "),!1===a){if(-1===(p=s(e,l))){h=d.trim(e.slice(o,l)),n(h),a=!1,o=l+1;continue}l=p-1;continue}if(-1===(p=c(e,l-1))){h=d.trim(e.slice(o,l)),h=u(h),n(a,h),a=!1,o=l+1;continue}}else;else{if(-1===(p=e.indexOf(m,l+1)))break;h=d.trim(e.slice(o+1,p)),n(a,h),a=!1,l=p,o=l+1}else a=e.slice(o,l),o=l+1}return o<e.length&&(!1===a?n(e.slice(o)):n(a,u(d.trim(e.slice(o))))),d.trim(r.join(" "))}function s(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}function u(e){return l(e)?e.substr(1,e.length-2):e}var d=n(35),f=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=a,t.parseAttr=i},64:function(e,t,n){function o(e){if("$"===e[0]&&"$"===e[e.length-1]){if(e=e.substr(1,e.length-2),"$"===e[0]&&"$"===e[e.length-1]){if(e=e.substr(1,e.length-2),!e.length)return null;try{return katex.renderToString(e)}catch(e){return null}}}return null}function r(e){if("@"===e[0]&&"@"===e[e.length-1]){e=e.substr(1,e.length-2).trim();var t=e.split(/[,\s]+/g),n={},o=/\.(\w+)$/g;t.map(function(e,t,r){if(o.lastIndex=0,o.test(e)){o.lastIndex=0;var a=o.exec(e)[1];n[a]=e}});var r="",a=!1,i="";for(var s in n){var c="flv"===s?"x-flv":s;r+='<source src="'+n[s]+'" type="video/'+c+'">',"flv"===s&&(a=!0)}if(a){var l=!1;try{l=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){l=void 0!==navigator.mimeTypes["application/x-shockwave-flash"]}l||(i='<blockquote><p>您还没有安装flash播放器，请点击<a href="http://www.adobe.com/go/getflash" target="_blank">这里</a>安装</p>\n                <p>安装后重启浏览器即可播放视频</p></blockquote>')}return $("<div>"+i+'<video class="video-js vjs-default-skin" controls preload="auto"\n            data-setup=\'{"fluid":true}\'>'+r+"</video></div>").html()}return null}function a(e,t){if(t=t||{},Object.keys(l).forEach(function(e){void 0===t[e]&&(t[e]=l[e])}),t.renderer=new i.Renderer,t.renderer.paragraph=function(e){return e.split("\n").map(function(e){return"<p>"+e+"</p>\n"}).join("")},!1!==t.math){var n=t.renderer.codespan.bind(t.renderer);t.renderer.codespan=function(e){var t=void 0;return(t=o(e))?t:n(e)}}if(!1!==t.video){var a=t.renderer.codespan.bind(t.renderer);t.renderer.codespan=function(e){var t=void 0;return(t=r(e))?t:a(e)}}var u=i(e,t);return u=s().process(u,{sync:!0}).html,u=c(u)}var i=n(73),s=n(74),c=n(66);i.Lexer.rules.gfm.heading=i.Lexer.rules.normal.heading,i.Lexer.rules.tables.heading=i.Lexer.rules.normal.heading;var l={gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,smartypants:!1};e.exports=a},66:function(e,t,n){function o(e,t){return new i(t).process(e)}var r=n(62),a=n(63),i=n(69);t=e.exports=o,t.FilterXSS=i;for(var s in r)t[s]=r[s];for(var s in a)t[s]=a[s];"undefined"!=typeof window&&(window.filterXSS=e.exports)},67:function(e,t,n){function o(e){return void 0===e||null===e}function r(e){var t={};for(var n in e)t[n]=e[n];return t}function a(e){e=r(e||{}),e.whiteList=e.whiteList||i.whiteList,e.onAttr=e.onAttr||i.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||i.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||i.safeAttrValue,this.options=e}var i=n(60),s=n(68);n(61);a.prototype.process=function(e){if(e=e||"",!(e=e.toString()))return"";var t=this,n=t.options,r=n.whiteList,a=n.onAttr,i=n.onIgnoreAttr,c=n.safeAttrValue;return s(e,function(e,t,n,s,l){var u=r[n],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(s):u instanceof RegExp&&(d=u.test(s)),!0!==d&&(d=!1),s=c(n,s)){var f={position:t,sourcePosition:e,source:l,isWhite:d};if(d){var h=a(n,s,f);return o(h)?n+":"+s:h}var h=i(n,s,f);return o(h)?void 0:h}})},e.exports=a},68:function(e,t,n){function o(e,t){function n(){if(!a){var n=r.trim(e.slice(i,s)),o=n.indexOf(":");if(-1!==o){var l=r.trim(n.slice(0,o)),u=r.trim(n.slice(o+1));if(l){var d=t(i,c.length,l,u,n);d&&(c+=d+"; ")}}}i=s+1}e=r.trimRight(e),";"!==e[e.length-1]&&(e+=";");for(var o=e.length,a=!1,i=0,s=0,c="";s<o;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var u=e.indexOf("*/",s+2);if(-1===u)break;s=u+1,i=s+1,a=!1}else"("===l?a=!0:")"===l?a=!1:";"===l?a||n():"\n"===l&&n()}return r.trim(c)}var r=n(61);e.exports=o},69:function(e,t,n){function o(e){return void 0===e||null===e}function r(e){var t=f.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=f.trim(e.slice(t+1,-1));var n="/"===e[e.length-1];return n&&(e=f.trim(e.slice(0,-1))),{html:e,closing:n}}function a(e){var t={};for(var n in e)t[n]=e[n];return t}function i(e){e=a(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=c.onIgnoreTagStripAll),e.whiteList=e.whiteList||c.whiteList,e.onTag=e.onTag||c.onTag,e.onTagAttr=e.onTagAttr||c.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||c.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||c.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||c.safeAttrValue,e.escapeHtml=e.escapeHtml||c.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new s(e.css))}var s=n(34).FilterCSS,c=n(62),l=n(63),u=l.parseTag,d=l.parseAttr,f=n(35);i.prototype.process=function(e){if(e=e||"",!(e=e.toString()))return"";var t=this,n=t.options,a=n.whiteList,i=n.onTag,s=n.onIgnoreTag,l=n.onTagAttr,h=n.onIgnoreTagAttr,p=n.safeAttrValue,m=n.escapeHtml,v=t.cssFilter;n.stripBlankChar&&(e=c.stripBlankChar(e)),n.allowCommentTag||(e=c.stripCommentTag(e));var g=!1;if(n.stripIgnoreTagBody){var g=c.StripTagBody(n.stripIgnoreTagBody,s);s=g.onIgnoreTag}var b=u(e,function(e,t,n,c,u){var g={sourcePosition:e,position:t,isClosing:u,isWhite:a.hasOwnProperty(n)},b=i(n,c,g);if(!o(b))return b;if(g.isWhite){if(g.isClosing)return"</"+n+">";var w=r(c),y=a[n],x=d(w.html,function(e,t){var r=-1!==f.indexOf(y,e),a=l(n,e,t,r);if(!o(a))return a;if(r)return t=p(n,e,t,v),t?e+'="'+t+'"':e;var a=h(n,e,t,r);return o(a)?void 0:a}),c="<"+n;return x&&(c+=" "+x),w.closing&&(c+=" /"),c+=">"}var b=s(n,c,g);return o(b)?m(c):b},m);return g&&(b=g.remove(b)),b},e.exports=i},77:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(e,t){if(e instanceof jQuery&&(e=e.get(0)),e.focus(),document.selection){document.selection.creatRange().text=t}else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var n=e.selectionStart,o=e.selectionEnd,r=n,a=e.value;e.value=a.substring(0,n)+t+a.substring(o,a.length),r+=t.length,e.selectionStart=e.selectionEnd=r}else e.value+=t}var a=this;n(78);var i=n(4),s=n(79),c=n(6),l=$("#jinja-data").data(),u=$("#askquestion");l.isAuthenticated||$('a[href="#askquestion"]').on("click",function(e){return $("#sign-modal").modal("show"),!1}),u.find("input[name=title]").on("keypress keyup",function(){localStorage.questionTitle=$(this).val()}),u.find("textarea").on("keypress keyup",function(){localStorage.questionContent=$(this).val()}),u.on("show.bs.modal",function(){$("input[name=title]",this).val(localStorage.questionTitle||""),$("textarea",this).val(localStorage.questionContent||"")}),u.on("show.bs.modal",function(){var e=$(".q-tags",this),t=$(".q-types",this);$.get(l.questionForm).done(function(n){var o=[],r=[],a=n.types;delete a.all;for(var i in a)"discussion"==i?o.push('<span class="label label-success" value="'+i+'">'):o.push('<span class="label label-default" value="'+i+'">'),o.push(n.types[i]+"</span>");n.tags.map(function(e){r.push('<span class="label label-default" value="'+e.name+'">'),r.push(e.name+"</span>")}),t.html(o.join("")),e.html(r.join("")),t.off("click","span").on("click","span",function(){var e="label-default",n="label-success";t.find("span").removeClass(n).addClass(e),$(this).removeClass(e).addClass(n),"course"===$(this).attr("value")?u.find("textarea").attr("placeholder","推荐使用 Markdown 语法，至少输入 5 个字\nPS:你能提供信息越多，越有助于高效解决你的问题：\n\n1.清晰描述你的问题\n2.贴上相关代码和报错信息\n3.贴上相关截图\n4.说明已经尝试过的无效方案"):"course_error"===$(this).attr("value")?u.find("textarea").attr("placeholder","出错位置错误信息描述"):u.find("textarea").attr("placeholder","推荐使用 Markdown 语法，至少输入 5 个字")}),e.off("click","span").on("click","span",function(){var t="label-default",n="label-success",o=t;if($(this).hasClass(n)){var r=[n,o];t=r[0],n=r[1]}else if(3==$("span.label-success",e).length)return!1;$(this).removeClass(t).addClass(n)})}).fail(function(){i.flashMessage("error","获取标签失败，请刷新页面后重试")})});var d=function(){var e=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post(l.qiniuTokenUrl);case 2:if(t=e.sent,"error"!=t.status){e.next=6;break}return i.flashMessage(t.status,t.message),e.abrupt("return",!1);case 6:return e.abrupt("return",t.token);case 7:case"end":return e.stop()}},e,a)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=o(regeneratorRuntime.mark(function e(t){var n,o,u,d,f,h,p,m,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.Base64,o=localStorage.mode,u=$("canvas").get("ssh"===o?1:0),d=u.toDataURL("image/png").replace("data:image/png;base64,",""),f=l.userid+""+Date.now(),h=n.encode(f),p="https://upload.qiniup.com/putb64/-1/key/"+h,e.next=9,$.ajax({type:"post",url:p,headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken "+t},data:d}).done(function(){console.log("success"),c.hide()}).fail(function(e){i.flashMessage("error","上传图片失败"),Raven.captureException("图片上传失败："+JSON.stringify(e)),c.hide()});case 9:m=e.sent,m.hash&&(v="https://dn-simplecloud.shiyanlou.com/"+f+"-wm",g="![实验楼]("+v+")",r($("#askquestion textarea"),g));case 11:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}();u.find(".question-btn-img").hover(function(e){$(this).find(".img-btn-container").show()},function(){$(this).find(".img-btn-container").hide()}),u.find(".question-btn-img .upload-image-btn").on("click",function(){$("#mkeditor-pickfile").click()}),u.find(".question-btn-img .screenshot-btn").on("click",o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.show(),e.next=3,d();case 3:return t=e.sent,e.next=6,f(t);case 6:case"end":return e.stop()}},e,a)}))),u.on("click",".submit-question",o(regeneratorRuntime.mark(function e(){var t,n,o,r,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.find("form"),n=t.attr("action"),o=t.serializeJSON(),r=u.find(".q-tags .label-success"),s=u.find(".q-types .label-success"),$(".submit-question").prop("disabled",!0),o.type=s.attr("value"),c=$.makeArray(r),c.map(function(e,t,n){o["tag-"+(t+1)]=$(e).attr("value")}),l.labid&&(o.lab_id=l.labid,o["tag-1"]="课程相关"),l.courseId&&(o.owner_id=l.courseId,o["tag-1"]="课程相关",o.type="course"),"true"==localStorage.courseError&&(o.type="course_error"),o.offered_money||(o.offered_money=0),o.content=$("#askquestion textarea").val(),e.next=16,$.post(n,o).fail(function(){i.flashMessage("error","提问失败，请刷新页面后重试")}).done(function(e){if(e.ok){if(localStorage.removeItem("questionTitle"),localStorage.removeItem("questionContent"),l.labid&&l.courseId)return $("input",t).val(""),$("textarea",t).val(""),u.modal("hide"),void i.flashMessage("success",e.message);window.location.href=e.next}else u.modal("hide"),i.flashMessage(e.ok,e.message)}).always(function(){u.modal("hide"),$(".submit-question").prop("disabled",!1)});case 16:case"end":return e.stop()}},e,a)})))},78:function(e,t,n){function o(e){var t="https://dn-simplecloud.shiyanlou.com/";Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:e.find(".mkeditor-btn-img").attr("id"),custom_uptoken_url:c.qiniuTokenUrl,custom_uptoken_data:{doc_edit:"True"},domain:t,bucket:"simplecloud",max_file_size:"5mb",max_retries:5,dragdrop:!0,drop_element:e.find(".mkeditor-btn-img").attr("id"),chunk_size:"4mb",auto_start:!1,unique_names:!1,save_key:!1,init:{FilesAdded:function(e,t){plupload.each(t,function(t){e.start()})},UploadProgress:function(e,t){s.show()},FileUploaded:function(n,o,a){var a="string"==typeof a?$.parseJSON(a):a,i=a.key;r(e.find("textarea"),"\n![图片描述]("+t+i+"-wm)\n"),setTimeout(function(){s.hide()},1e3)},Error:function(e,t,n){if(s.hide(),"File size error."==t.message)return void a.flashMessage("error","图片上传最大5M，请检查后重试");a.flashMessage("error","插入图片失败，请刷新后重试"),Raven.captureException("图片上传失败："+JSON.stringify(t))},Key:function(e,t){var n=(new Date).getTime();return"uid/"+c.userid+"/"+n+".png"}}})}function r(e,t){e instanceof jQuery&&(e=e.get(0)),e.focus();var n=window.getSelection().toString()||null,o=void 0;"string"==typeof t?o=t:"function"==typeof t&&(o=t&&t(n));var r=e.selectionStart,a=e.selectionEnd,i=r,s=e.value;e.value=s.substring(0,r)+o+s.substring(a,s.length),i+=o.length,e.selectionStart=e.selectionEnd=i,$(e).trigger("keypress").trigger("keyup")}var a=n(4),i=n(64),s=n(6),c=$("#jinja-data").data(),l={bold:function(e){return e?"**"+e+"**":"**加粗文字**\n"},italic:function(e){return e?"*"+e+"*":"*斜体文字*\n"},link:function(){return"[连接描述](https://www.shiyanlou.com/)\n"},quote:function(e){return e?"> "+e:"> 引用文字\n"},code:function(e){return e?"```\n"+e+"\n```\n":"```\n输入代码\n```\n"},ol:function(e){return e?" 1. "+e+"\n":" 1. 列表项目\n"},ul:function(e){return e?" -. "+e+"\n":" - 列表项目\n"}};$(".mkeditor").on("mouseover",function(){var e=$("textarea",this),t=$(".mkeditor-viewer div",this),n=$(".mkeditor-btn-bold",this),o=$(".mkeditor-btn-italic",this),a=$(".mkeditor-btn-link",this),s=$(".mkeditor-btn-quote",this),c=$(".mkeditor-btn-code",this),u=$(".mkeditor-btn-listol",this),d=$(".mkeditor-btn-listul",this),f=$(".mkeditor-btn-view",this);n.off("click").on("click",function(){r(e,l.bold)}),o.off("click").on("click",function(){r(e,l.italic)}),a.off("click").on("click",function(){r(e,l.link)}),s.off("click").on("click",function(){r(e,l.quote)}),c.off("click").on("click",function(){r(e,l.code)}),u.off("click").on("click",function(){r(e,l.ol)}),d.off("click").on("click",function(){r(e,l.ul)}),f.off("click").on("click",function(){var n=e.val();n=i(n),t.html(n),$("pre > code",t).each(function(){hljs.highlightBlock(this)})})}).each(function(){c.isAuthenticated&&o($(this))})},8:function(e,t,n){var o=n(65),r=$("#base-data").data(),a=null;if(r&&r.isLogin){var i={query:"token="+r.jwtToken,transports:["websocket"]};r.isJwt||(i.query="uid="+r.userId),a=o(r.socketUrl,i),a.on("disconnect",function(){a.disconnect()})}e.exports=a},83:function(e,t,n){function o(e){if("$"===e[0]&&"$"===e[e.length-1]){if(e=e.substr(1,e.length-2),"$"===e[0]&&"$"===e[e.length-1]){if(e=e.substr(1,e.length-2),!e.length)return null;try{return katex.renderToString(e)}catch(e){return null}}}return null}function r(e){if("@"===e[0]&&"@"===e[e.length-1]){e=e.substr(1,e.length-2).trim();var t=e.split(/[,\s]+/g),n={},o=/\.(\w+)$/g;t.map(function(e,t,r){if(o.lastIndex=0,o.test(e)){o.lastIndex=0;var a=o.exec(e)[1];n[a]=e}});var r="";for(var a in n){var i="flv"===a?"x-flv":a;r+='<source src="'+n[a]+'" type="video/'+i+'">'}var s=!1;try{s=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){s=void 0!==navigator.mimeTypes["application/x-shockwave-flash"]}var c="";return s||(c='<blockquote><p>您还没有安装flash播放器，请点击<a href="http://www.adobe.com/go/getflash" target="_blank">这里</a>安装</p>\n                <p>安装后重启浏览器即可播放视频</p></blockquote>'),$("<div>"+c+'<video class="video-js vjs-default-skin" controls preload="auto"\n            data-setup=\'{"fluid":true}\'>'+r+"</video></div>").html()}return null}function a(e,t){if(t=t||{},Object.keys(c).forEach(function(e){void 0===t[e]&&(t[e]=c[e])}),t.renderer=new i.Renderer,t.renderer.paragraph=function(e){return e.split("\n").map(function(e){return"<p>"+e+"</p>\n"}).join("")},!1!==t.math){var n=t.renderer.codespan.bind(t.renderer);t.renderer.codespan=function(e){var t=void 0;return(t=o(e))?t:n(e)}}if(!1!==t.video){var a=t.renderer.codespan.bind(t.renderer);t.renderer.codespan=function(e){var t=void 0;return(t=r(e))?t:a(e)}}var l=i(e,t);return l=l.replace(/\<(\s*s\s*c\s*r\s*i\s*p\s*t.*?)\>/gi,"&lt;$1&gt;"),l=l.replace(/\<(\s*\/\s*s\s*c\s*r\s*i\s*p\s*t\s*)\>/gi,"&lt;$1&gt;"),l=s().process(l,{sync:!0}).html}var i=n(73),s=n(74);n(66);i.Lexer.rules.gfm.heading=i.Lexer.rules.normal.heading,i.Lexer.rules.tables.heading=i.Lexer.rules.normal.heading;var c={gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,smartypants:!1};e.exports=a},9:function(e,t,n){function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,a){try{var i=t[r](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){o("next",e)},function(e){o("throw",e)});e(s)}return o("next")})}}function r(){d<0&&(d=0,clearInterval(f));var e=Math.floor(d/60),t=d%60;e=e<10?"0"+e:e,t=t<10?"0"+t:t,$(".count-down").text(e+":"+t),d--}n(14),n(40),n(41);var a=n(7),i=n(50),s=(n(33),n(49)),c=n(6),l=n(4),u=$("#base-data").data();$(function(){var e=function(){var e=o(regeneratorRuntime.mark(function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post(t,{new_env:o});case 2:n=e.sent,n.ok?setTimeout(function(){window.location.href=n.nexturl},2e3):(c.showLoad(!1),p=!1,l.flashMessage(n.ok,n.message));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t=!1;if($(".get-coupon-1024").on("click",o(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return $("#fuli-1024").modal("show"),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,$.post("/api/activity/coupon");case 6:n=e.sent,n.ok?(t=!0,$("#fuli-1024 .modal-body span").text(n.code),$("#fuli-1024").modal("show")):l.flashMessage(!1,"领取失败，请重试！"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),l.flashMessage(!1,"领取失败，请重试！");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[3,10]])}))),"hide"!=localStorage.haiwai){var n=(window.location.href,window.location.search.substring(1)),r=n?n.split("&"):[],d={};r.forEach(function(e,t,n){var o=e.split("=");d[o[0]]=o[1]}),$(window).width()>768&&"true"!=d.client&&$("#haiwai-modal").modal("show"),$("#haiwai-modal").on("hide.bs.modal",function(){localStorage.haiwai="hide"})}$("#side-new-contest").length&&new a({el:"#side-new-contest",render:function(e){return e(i)}}),$("#search-box").length&&new a({el:"#search-box",render:function(e){return e(s)}}),$("#search-new").length&&new a({el:"#search-new",render:function(e){return e(s)}});var f=$("#hello-modal");f.find(".yes-btn").on("click",o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f.modal("hide"),c.show(),n=$(this).data("url"),t.next=5,e(n,1);case 5:return c.hide(),t.abrupt("return",!1);case 7:case"end":return t.stop()}},t,this)}))),f.on("show.bs.modal",function(){localStorage.helloModal=!0}),"true"!=localStorage.helloModal&&f.modal("show");var h=null,p=!1;$(".user-vm-btn").on("click",function(){var t=$(this).data("clear"),n=$(this).data("start");$(this).data("run");return h=$(this),p?c.showProgress():c.showLoad(),$.post(t,{userlab:u.userlabId}).done(function(t){"success"==t.status?setTimeout(function(){e(n)},3e3):"error"==t.status&&e(n)}),!1});!function(){var t=0;$(".btn-progress-reload").on("click",function(){t&&clearTimeout(t),t=setTimeout(function(){p=!0,h&&(h.url?(c.showProgress(),e(h.url,h.next)):h.trigger("click"))},200)})}(),$(document).on("click",".stat-event",function(){var e=$(this).data("stat");$.post("/api/logstash",{name:e}).fail(function(){console.log("ajax failed")})}),$(".switch-btn input[type=checkbox]").bootstrapSwitch({onText:"是",offText:"否",onColor:"success"}),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),u.flash&&($("#flash").modal("show"),$(".modal-backdrop").hide(),$("body").css({"padding-right":"0",overflow:"auto"}),setTimeout(function(){$("body").removeClass("modal-open"),$("#flash").modal("hide"),$("body").removeAttr("style")},3e3)),$(".header .user-vip").on("click",function(){var e=$(this).data("url");return window.location.href=e,!1}),$(".header").on("click",".tooltip",function(){var e=$(this).data("url");return window.location.href=e,!1}),$("#flash-modal").modal(),$("#new-features").modal("show").find(".btn").on("click",function(){window.open($(this).data("href"),"blank")}),$(".words-ctrl form input, .words-ctrl form textarea, .report-words-ctrl textarea").on("keyup keypress",function(){var e=$(this).attr("min"),t=$(this).attr("max"),n=$(this).val().length,o="";void 0!==e&&void 0!==t&&(o=n<e?'<span class="text-danger">字数太少，至少需要'+e+"字</span>":n>t?'<span class="text-danger">字数太多，不能超过'+t+"字</span>":'<span class="text-success">还能输入'+(t-n)+"字</span>",$(this).parent().find(".help-block").html(o).show())})}),$(function(){$("input[name=school]").on("keypress keyup",function(){$(".college-suggestion").remove();var e=this,t=$(this).val();$.get("/search/college",{search:t}).done(function(t){if(t.data.length){for(var n=t.data,o='<div class="college-suggestion">',r=0;r<n.length;r++)o+="<a>"+n[r]+"</a>";o+="</div>",$(e).parent().append(o),$(".college-suggestion").css({position:"absolute",padding:"4px",border:"solid 1px #eee","border-top":"none",background:"#fff","z-index":2e3}).find("a").css({display:"block",padding:"6px 8px",color:"#4c5157","font-size":"13px"}).hover(function(){$(this).css({color:"#fff",background:"#0c9","text-decoration":"none"}),$(e).val($(this).text())},function(){$(this).css({color:"#4c5157",background:"#fff"})}),$(".college-suggestion").on("click",function(){$(".college-suggestion").remove()})}})})}),$(".dropdown-course").on("click",function(){return window.location.href="/courses/",!1});var d=parseInt($(".lab-hint-subtitle .lab-time").text()),f=setInterval(r,1e3);e.exports=l}},[525]);
//# sourceMappingURL=console.js.map